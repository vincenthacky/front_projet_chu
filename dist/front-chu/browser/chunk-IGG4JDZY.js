import{a as $e}from"./chunk-2L66QWVP.js";import{a as He,b as Ye}from"./chunk-HTLBF6DE.js";import{a as Ie,b as Fe,c as Ne,d as De,e as ke}from"./chunk-ZNNLVML5.js";import{a as Oe,b as Ve}from"./chunk-LJV24WEU.js";import{b as Ge}from"./chunk-3GN7TVAK.js";import{b as qe}from"./chunk-NE5SRTVG.js";import{a as Ue,b as Be}from"./chunk-R6I3ZYWE.js";import{b as Y,c as $,d as J}from"./chunk-GCISQTDG.js";import{b as U}from"./chunk-LBGCJ5DM.js";import{d as we}from"./chunk-BXEXRG32.js";import{a as ye,b as Ee,c as Pe,e as Re}from"./chunk-CGU7QHHX.js";import{e as Te}from"./chunk-7SAAJH44.js";import{a as We,b as je}from"./chunk-GVH7LQMP.js";import{d as re,i as _e,j as fe,k as ze,l as xe,m as he,n as Ce,o as ve,p as be}from"./chunk-H2WVXF2P.js";import"./chunk-VWKRELSZ.js";import{a as ce,b as de}from"./chunk-4JHK4MQK.js";import{a as ue,b as ge}from"./chunk-OSEQ4WIA.js";import{a as Se,b as Me}from"./chunk-5HO2BJJL.js";import"./chunk-6XHWMXPL.js";import{d as Ae,e as Le}from"./chunk-66NTQKWN.js";import"./chunk-WVDIGHRG.js";import{a as se,b as me,c as pe}from"./chunk-ZOZAVNX6.js";import{c as le}from"./chunk-HJIGARTC.js";import"./chunk-465NLBOU.js";import{a as B,b as G,d as q,f as H}from"./chunk-IXUSDIY2.js";import"./chunk-CZTCGH7Y.js";import{A as oe,B as ae,d as Q,e as R,g as K,h as X,m as Z,n as ee,q as te,r as ne,z as ie}from"./chunk-XBYNCXSQ.js";import"./chunk-DST4DQF7.js";import{qa as W,sa as j}from"./chunk-PYGBBRX5.js";import"./chunk-V6I33QLD.js";import"./chunk-4FK3KGSF.js";import"./chunk-PA5JYGXZ.js";import"./chunk-HPXRSP2X.js";import"./chunk-YLHBJJO7.js";import{A as L,s as D,t as k,z as A}from"./chunk-H734YLDB.js";import{Aa as u,Ac as P,Mb as i,Nb as t,Ob as _,Sb as M,Yb as f,_b as g,fb as o,gb as E,gc as y,hc as r,ic as C,jc as z,kc as T,lc as F,mc as v,nc as b,oa as I,oc as S,qc as N,rc as h,vb as x,wc as O,za as d,zb as s,zc as V}from"./chunk-EIVDWLNO.js";import{a as w}from"./chunk-4CLCTAJ7.js";var Ke=()=>({color:"#1890ff"}),Xe=()=>({color:"#faad14"}),Ze=()=>({color:"#52c41a"}),Je=()=>({color:"#ff4d4f"}),et=()=>({x:"1400px"}),tt=()=>[10,15,20,50];function nt(m,a){m&1&&_(0,"span",49)}function it(m,a){if(m&1&&(i(0,"div",65),r(1),t()),m&2){let e=g().$implicit,n=g();o(),C(n.getUserMatricule(e))}}function ot(m,a){if(m&1&&(i(0,"div",69),r(1),t()),m&2){let e=g(2).$implicit,n=g();o(),C(n.formatDate(e.date_reponse))}}function at(m,a){if(m&1&&(i(0,"div",66)(1,"div",67),r(2),O(3,"slice"),t(),x(4,ot,2,1,"div",68),t()),m&2){let e=g().$implicit;o(2),T("",V(3,3,e.reponse_admin,0,50),"",e.reponse_admin.length>50?"...":"",""),o(2),s("ngIf",e.date_reponse)}}function rt(m,a){m&1&&(i(0,"span",70),r(1,"Aucune r\xE9ponse"),t())}function lt(m,a){if(m&1){let e=M();i(0,"div",71)(1,"button",72),f("click",function(){d(e);let l=g().$implicit,c=g();return u(c.openResponseModal(l))}),_(2,"span",73),r(3," R\xE9pondre "),t(),i(4,"button",74),f("click",function(){d(e);let l=g().$implicit,c=g();return u(c.markAsResolved(l))}),_(5,"span",75),r(6," R\xE9soudre "),t(),i(7,"button",76),f("click",function(){d(e);let l=g().$implicit,c=g();return u(c.markAsRejected(l))}),_(8,"span",77),r(9," Rejeter "),t()()}}function st(m,a){if(m&1){let e=M();i(0,"div",71)(1,"button",78),f("click",function(){d(e);let l=g().$implicit,c=g();return u(c.openResponseModal(l))}),_(2,"span",79),r(3," Modifier "),t()()}}function mt(m,a){if(m&1&&(i(0,"tr")(1,"td")(2,"strong"),r(3),t()(),i(4,"td")(5,"div",50)(6,"div",51)(7,"div",52),r(8),t(),i(9,"div",53),r(10),t(),i(11,"div",54),r(12),t(),x(13,it,2,1,"div",55),t()()(),i(14,"td")(15,"div",56)(16,"div",57),r(17),t(),i(18,"div",58),r(19),O(20,"slice"),t()()(),i(21,"td")(22,"nz-tag",59),r(23),t()(),i(24,"td")(25,"nz-tag",59),r(26),t()(),i(27,"td")(28,"div",60),r(29),t()(),i(30,"td")(31,"nz-tag",59),r(32),t()(),i(33,"td"),x(34,at,5,7,"div",61)(35,rt,2,0,"ng-template",null,3,P),t(),i(37,"td",62)(38,"div",63),x(39,lt,10,0,"div",64)(40,st,4,0,"div",64),t()()()),m&2){let e=a.$implicit,n=y(36),l=g();o(3),z("#",e.id_reclamation,""),o(5),C(l.getUserFullName(e)),o(2),C(l.getUserEmail(e)),o(2),z("Souscription #",e.id_souscription,""),o(),s("ngIf",e.souscription.utilisateur==null?null:e.souscription.utilisateur.matricule),o(4),C(e.titre),o(2),T("",V(20,19,e.description,0,100),"",e.description.length>100?"...":"",""),o(3),s("nzColor",l.getTypeColor(e.type_reclamation)),o(),z(" ",l.getTypeLabel(e.type_reclamation)," "),o(2),s("nzColor",l.getPriorityColor(e.priorite)),o(),z(" ",l.getPriorityLabel(e.priorite)," "),o(3),z(" ",l.formatDate(e.date_reclamation)," "),o(2),s("nzColor",l.getStatusDisplay(e).color),o(),z(" ",l.getStatusDisplay(e).label," "),o(2),s("ngIf",e.reponse_admin)("ngIfElse",n),o(5),s("ngIf",e.id_statut_reclamation===3),o(),s("ngIf",e.id_statut_reclamation!==3)}}function pt(m,a){if(m&1&&r(0),m&2){let e=a.$implicit,n=a.range;F(" Affichage ",n[0],"-",n[1]," de ",e," r\xE9clamations ")}}function ct(m,a){if(m&1&&(i(0,"div",80),_(1,"nz-alert",81),t()),m&2){let e=g();o(),s("nzMessage",e.error)}}function dt(m,a){if(m&1&&(i(0,"div",97)(1,"strong"),r(2,"Matricule:"),t(),r(3),t()),m&2){let e=g(3);o(3),z(" ",e.getUserMatricule(e.selectedReclamation)," ")}}function ut(m,a){if(m&1&&(i(0,"div",95)(1,"h4"),r(2),t(),i(3,"div",96)(4,"h5"),r(5,"Utilisateur"),t(),i(6,"div",97)(7,"strong"),r(8,"Nom:"),t(),r(9),t(),i(10,"div",97)(11,"strong"),r(12,"Email:"),t(),r(13),t(),i(14,"div",97)(15,"strong"),r(16,"T\xE9l\xE9phone:"),t(),r(17),t(),x(18,dt,4,1,"div",98),t(),_(19,"nz-divider",99),i(20,"div",100)(21,"h5"),r(22,"R\xE9clamation"),t(),i(23,"div",97)(24,"strong"),r(25,"Titre:"),t(),r(26),t(),i(27,"div",97)(28,"strong"),r(29,"Type:"),t(),i(30,"nz-tag",59),r(31),t()(),i(32,"div",97)(33,"strong"),r(34,"Priorit\xE9:"),t(),i(35,"nz-tag",59),r(36),t()(),i(37,"div",97)(38,"strong"),r(39,"Date cr\xE9ation:"),t(),r(40),t(),i(41,"div",97)(42,"strong"),r(43,"Description:"),t(),i(44,"div",101),r(45),t()()()()),m&2){let e=g(2);o(2),z("D\xE9tails de la r\xE9clamation #",e.selectedReclamation.id_reclamation,""),o(7),z(" ",e.getUserFullName(e.selectedReclamation)," "),o(4),z(" ",e.getUserEmail(e.selectedReclamation)," "),o(4),z(" ",e.getUserPhone(e.selectedReclamation)," "),o(),s("ngIf",e.selectedReclamation.souscription.utilisateur==null?null:e.selectedReclamation.souscription.utilisateur.matricule),o(),s("nzDashed",!0),o(7),z(" ",e.selectedReclamation.titre," "),o(4),s("nzColor",e.getTypeColor(e.selectedReclamation.type_reclamation)),o(),z(" ",e.getTypeLabel(e.selectedReclamation.type_reclamation)," "),o(4),s("nzColor",e.getPriorityColor(e.selectedReclamation.priorite)),o(),z(" ",e.getPriorityLabel(e.selectedReclamation.priorite)," "),o(4),z(" ",e.formatDate(e.selectedReclamation.date_reclamation)," "),o(5),C(e.selectedReclamation.description)}}function gt(m,a){m&1&&(i(0,"div",102),r(1," La r\xE9ponse doit contenir au moins 10 caract\xE8res "),t())}function _t(m,a){if(m&1){let e=M();i(0,"div"),x(1,ut,46,13,"div",82),_(2,"nz-divider"),i(3,"form",83),f("ngSubmit",function(){d(e);let l=g();return u(l.submitResponse())}),i(4,"div",84)(5,"div",85)(6,"nz-form-item")(7,"nz-form-label",86),r(8,"Statut"),t(),i(9,"nz-form-control",87)(10,"nz-select",88),_(11,"nz-option",15)(12,"nz-option",16)(13,"nz-option",17),t()()()(),i(14,"div",85)(15,"nz-form-item")(16,"nz-form-label",86),r(17,"R\xE9ponse"),t(),i(18,"nz-form-control",87)(19,"textarea",89),r(20,"              "),t(),x(21,gt,2,0,"div",90),t()()()(),i(22,"div",91)(23,"div",92)(24,"button",93),f("click",function(){d(e);let l=g();return u(l.closeResponseModal())}),r(25," Annuler "),t(),i(26,"button",94),f("click",function(){d(e);let l=g();return u(l.submitResponse())}),r(27," Envoyer la r\xE9ponse "),t()()()()()}if(m&2){let e,n=g();o(),s("ngIf",n.selectedReclamation),o(2),s("formGroup",n.responseForm),o(),s("nzGutter",16),o(3),s("nzSpan",6),o(2),s("nzSpan",18),o(2),s("nzValue",3),o(),s("nzValue",4),o(),s("nzValue",6),o(3),s("nzSpan",6),o(2),s("nzSpan",18),o(3),s("ngIf",((e=n.responseForm.get("reponse_admin"))==null?null:e.invalid)&&((e=n.responseForm.get("reponse_admin"))==null?null:e.touched)),o(),s("nzGutter",16),o(4),s("nzLoading",!1)}}var Qe=class m{constructor(a,e,n){this.reclamationService=a;this.message=e;this.fb=n;this.responseForm=this.fb.group({reponse_admin:["",[R.required,R.minLength(10)]],id_statut_reclamation:[4,[R.required]]})}reclamations=[];totalReclamations=0;isLoading=!1;error=null;currentPage=1;perPage=15;totalPages=0;filters={page:1,per_page:15};searchTerm="";statusFilter="";typeFilter="";priorityFilter="";dateDebut="";dateFin="";isResponseModalVisible=!1;responseForm;selectedReclamation=null;Math=Math;searchTimeout;ngOnInit(){this.loadReclamations()}ngOnDestroy(){this.searchTimeout&&clearTimeout(this.searchTimeout)}loadReclamations(a){console.log("\u{1F504} Chargement des r\xE9clamations"),this.isLoading=!0,this.error=null;let e=w(w({},this.filters),a);console.log("\u{1F4E4} Filtres envoy\xE9s \xE0 l'API:",e),this.reclamationService.getAllReclamations(e).subscribe({next:n=>{console.log("\u{1F4E1} R\xE9ponse API r\xE9clamations:",n),n.success?(this.reclamations=n.data,this.totalReclamations=n.pagination.total,this.currentPage=n.pagination.current_page,this.totalPages=n.pagination.last_page,console.log("\u2705 R\xE9clamations charg\xE9es:",this.reclamations.length)):(console.error("\u274C Erreur API:",n.message),this.error=n.message||"Erreur lors du chargement des r\xE9clamations")},error:n=>{console.error("\u{1F6A8} Erreur lors du chargement:",n),this.error="Impossible de charger les r\xE9clamations. Veuillez r\xE9essayer.",this.reclamations=[]},complete:()=>{this.isLoading=!1,console.log("\u2705 Chargement termin\xE9")}})}openResponseModal(a){this.selectedReclamation=a,this.responseForm.patchValue({reponse_admin:"",id_statut_reclamation:4}),this.isResponseModalVisible=!0}closeResponseModal(){this.isResponseModalVisible=!1,this.selectedReclamation=null,this.responseForm.reset()}submitResponse(){if(this.responseForm.valid&&this.selectedReclamation){let a=this.responseForm.value,e={id_statut_reclamation:a.id_statut_reclamation,reponse_admin:a.reponse_admin,date_reponse:new Date().toISOString(),date_traitement:new Date().toISOString()};a.id_statut_reclamation===4&&(e.date_resolution=new Date().toISOString());let n=this.message.loading("Envoi de la r\xE9ponse...",{nzDuration:0});this.reclamationService.respondToReclamation(this.selectedReclamation.id_reclamation,e).subscribe({next:l=>{this.message.remove(n.messageId),this.message.success("R\xE9ponse envoy\xE9e avec succ\xE8s"),this.closeResponseModal(),this.loadReclamations()},error:l=>{console.error("\u274C Erreur envoi r\xE9ponse:",l),this.message.remove(n.messageId),this.message.error("Erreur lors de l'envoi de la r\xE9ponse")}})}else this.message.warning("Veuillez remplir tous les champs requis")}markAsResolved(a){let e={id_statut_reclamation:4,reponse_admin:"R\xE9clamation trait\xE9e et r\xE9solue.",date_reponse:new Date().toISOString(),date_traitement:new Date().toISOString(),date_resolution:new Date().toISOString()},n=this.message.loading("Marquage comme r\xE9solu...",{nzDuration:0});this.reclamationService.respondToReclamation(a.id_reclamation,e).subscribe({next:l=>{this.message.remove(n.messageId),this.message.success("R\xE9clamation marqu\xE9e comme r\xE9solue"),this.loadReclamations()},error:l=>{console.error("\u274C Erreur:",l),this.message.remove(n.messageId),this.message.error("Erreur lors du marquage")}})}markAsRejected(a){let e={id_statut_reclamation:6,reponse_admin:"R\xE9clamation rejet\xE9e apr\xE8s examen.",date_reponse:new Date().toISOString(),date_traitement:new Date().toISOString()},n=this.message.loading("Marquage comme rejet\xE9e...",{nzDuration:0});this.reclamationService.respondToReclamation(a.id_reclamation,e).subscribe({next:l=>{this.message.remove(n.messageId),this.message.success("R\xE9clamation rejet\xE9e"),this.loadReclamations()},error:l=>{console.error("\u274C Erreur:",l),this.message.remove(n.messageId),this.message.error("Erreur lors du rejet")}})}onPageChange(a){this.filters.page=a,this.loadReclamations()}onPageSizeChange(a){this.perPage=a,this.filters.per_page=a,this.filters.page=1,this.loadReclamations()}onSearchChange(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.filters.search=this.searchTerm,this.filters.page=1,this.loadReclamations()},500)}onStatusFilterChange(){this.filters.statut=this.statusFilter===""?void 0:Number(this.statusFilter),this.filters.page=1,this.loadReclamations()}onTypeFilterChange(){this.filters.type=this.typeFilter===""?void 0:this.typeFilter,this.filters.page=1,this.loadReclamations()}onPriorityFilterChange(){this.filters.priorite=this.priorityFilter===""?void 0:this.priorityFilter,this.filters.page=1,this.loadReclamations()}resetFilters(){this.filters={page:1,per_page:15},this.searchTerm="",this.statusFilter="",this.typeFilter="",this.priorityFilter="",this.dateDebut="",this.dateFin="",this.loadReclamations()}refresh(){this.loadReclamations()}getStatusDisplay(a){let e=a.statut;return{status:e.libelle_statut_reclamation,color:this.getStatusColor(e.couleur_statut),label:e.libelle_statut_reclamation}}getStatusColor(a){switch(a){case"#fd7e14":return"orange";case"#28a745":return"green";case"#dc3545":return"red";case"#007bff":return"blue";default:return"default"}}getTypeLabel(a){return this.reclamationService.getTypeLabel(a)}getTypeColor(a){return this.reclamationService.getTypeColor(a)}getPriorityLabel(a){return this.reclamationService.getPriorityLabel(a)}getPriorityColor(a){return this.reclamationService.getPriorityColor(a)}formatDate(a){return this.reclamationService.formatDate(a)}getUserFullName(a){let e=a.souscription.utilisateur;return e?`${e.prenom} ${e.nom}`:`Utilisateur ${a.souscription.id_utilisateur}`}getUserEmail(a){return a.souscription.utilisateur?.email||"Email non disponible"}getUserPhone(a){return a.souscription.utilisateur?.telephone||"T\xE9l\xE9phone non disponible"}getUserMatricule(a){let e=a.souscription.utilisateur;return e?.matricule||`USR-${e?.id_utilisateur||"N/A"}`}getReclamationsEnAttente(){return this.reclamations.filter(a=>a.id_statut_reclamation===3).length}getReclamationsResolues(){return this.reclamations.filter(a=>a.id_statut_reclamation===4).length}getReclamationsRejetees(){return this.reclamations.filter(a=>a.id_statut_reclamation===6).length}getReclamationsUrgentes(){return this.reclamations.filter(a=>a.priorite==="urgente").length}static \u0275fac=function(e){return new(e||m)(E($e),E(Te),E(ie))};static \u0275cmp=I({type:m,selectors:[["app-complaints"]],standalone:!0,features:[N],decls:90,vars:46,consts:[["suffixIconSearch",""],["basicTable",""],["totalTemplate",""],["noResponse",""],[1,"header-section"],[1,"header-title"],[1,"stats-grid"],[1,"stat-card"],[3,"nzValue","nzTitle","nzValueStyle"],[1,"filters-section"],[1,"filters-row"],[1,"filter-item"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Rechercher titre, description...",3,"ngModelChange","input","ngModel"],["nzPlaceHolder","Tous les statuts","nzAllowClear","",3,"ngModelChange","ngModel"],["nzLabel","En attente",3,"nzValue"],["nzLabel","R\xE9solue",3,"nzValue"],["nzLabel","Rejet\xE9e",3,"nzValue"],["nzPlaceHolder","Tous les types","nzAllowClear","",3,"ngModelChange","ngModel"],["nzValue","anomalie_paiement","nzLabel","Anomalie paiement"],["nzValue","information_erronee","nzLabel","Information erron\xE9e"],["nzValue","document_manquant","nzLabel","Document manquant"],["nzValue","avancement_projet","nzLabel","Avancement projet"],["nzValue","autre","nzLabel","Autre"],["nzPlaceHolder","Toutes les priorit\xE9s","nzAllowClear","",3,"ngModelChange","ngModel"],["nzValue","basse","nzLabel","Basse"],["nzValue","normale","nzLabel","Normale"],["nzValue","haute","nzLabel","Haute"],["nzValue","urgente","nzLabel","Urgente"],[1,"filter-actions"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","clear"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload"],[1,"table-section"],[3,"nzSpinning"],[3,"nzData","nzFrontPagination","nzScroll"],["nzWidth","100px"],["nzWidth","200px"],["nzWidth","250px"],["nzWidth","150px"],["nzWidth","120px"],["nzWidth","250px","nzAlign","center"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[3,"nzPageIndexChange","nzPageSizeChange","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowQuickJumper","nzShowTotal","nzPageSizeOptions"],["class","error-message",4,"ngIf"],["nzTitle","R\xE9pondre \xE0 la r\xE9clamation",3,"nzVisibleChange","nzOnCancel","nzVisible","nzWidth","nzFooter"],[4,"nzModalContent"],["nz-icon","","nzType","search"],[1,"user-info"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-subscription"],["class","user-matricule",4,"ngIf"],[1,"reclamation-content"],[1,"reclamation-title"],[1,"reclamation-description"],[3,"nzColor"],[1,"date-info"],["class","admin-response",4,"ngIf","ngIfElse"],["nzAlign","center"],[1,"actions-container"],["class","status-actions",4,"ngIf"],[1,"user-matricule"],[1,"admin-response"],[1,"response-text"],["class","response-date",4,"ngIf"],[1,"response-date"],[1,"no-response"],[1,"status-actions"],["nz-button","","nzType","primary","nzSize","small","nzTooltip","R\xE9pondre \xE0 la r\xE9clamation",3,"click"],["nz-icon","","nzType","message"],["nz-button","","nzType","default","nzSize","small","nzTooltip","Marquer comme r\xE9solue",3,"click"],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzSize","small","nzTooltip","Rejeter la r\xE9clamation",3,"click"],["nz-icon","","nzType","close"],["nz-button","","nzType","default","nzSize","small","nzTooltip","Modifier la r\xE9ponse",3,"click"],["nz-icon","","nzType","edit"],[1,"error-message"],["nzType","error","nzShowIcon","","nzCloseable","",3,"nzMessage"],["class","reclamation-details",4,"ngIf"],["nz-form","",3,"ngSubmit","formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["formControlName","id_statut_reclamation","nzPlaceHolder","S\xE9lectionner un statut"],["nz-input","","formControlName","reponse_admin","rows","4","placeholder","Saisissez votre r\xE9ponse d\xE9taill\xE9e..."],["class","error-text",4,"ngIf"],["nz-row","",1,"modal-actions",3,"nzGutter"],["nz-col","","nzSpan","24",2,"text-align","right"],["nz-button","","nzType","default",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],[1,"reclamation-details"],[1,"user-section"],[1,"detail-row"],["class","detail-row",4,"ngIf"],[3,"nzDashed"],[1,"reclamation-section"],[1,"description-text"],[1,"error-text"]],template:function(e,n){if(e&1){let l=M();i(0,"div",4)(1,"div",5)(2,"h2"),r(3,"Gestion des R\xE9clamations"),t(),i(4,"p"),r(5,"Interface d'administration pour traiter les r\xE9clamations clients"),t()(),i(6,"div",6)(7,"nz-card",7),_(8,"nz-statistic",8),t(),i(9,"nz-card",7),_(10,"nz-statistic",8),t(),i(11,"nz-card",7),_(12,"nz-statistic",8),t(),i(13,"nz-card",7),_(14,"nz-statistic",8),t(),i(15,"nz-card",7),_(16,"nz-statistic",8),t()()(),i(17,"div",9)(18,"div",10)(19,"div",11)(20,"label"),r(21,"Recherche"),t(),i(22,"nz-input-group",12)(23,"input",13),S("ngModelChange",function(p){return d(l),b(n.searchTerm,p)||(n.searchTerm=p),u(p)}),f("input",function(){return d(l),u(n.onSearchChange())}),t()(),x(24,nt,1,0,"ng-template",null,0,P),t(),i(26,"div",11)(27,"label"),r(28,"Statut"),t(),i(29,"nz-select",14),S("ngModelChange",function(p){return d(l),b(n.statusFilter,p)||(n.statusFilter=p),u(p)}),f("ngModelChange",function(){return d(l),u(n.onStatusFilterChange())}),_(30,"nz-option",15)(31,"nz-option",16)(32,"nz-option",17),t()(),i(33,"div",11)(34,"label"),r(35,"Type"),t(),i(36,"nz-select",18),S("ngModelChange",function(p){return d(l),b(n.typeFilter,p)||(n.typeFilter=p),u(p)}),f("ngModelChange",function(){return d(l),u(n.onTypeFilterChange())}),_(37,"nz-option",19)(38,"nz-option",20)(39,"nz-option",21)(40,"nz-option",22)(41,"nz-option",23),t()(),i(42,"div",11)(43,"label"),r(44,"Priorit\xE9"),t(),i(45,"nz-select",24),S("ngModelChange",function(p){return d(l),b(n.priorityFilter,p)||(n.priorityFilter=p),u(p)}),f("ngModelChange",function(){return d(l),u(n.onPriorityFilterChange())}),_(46,"nz-option",25)(47,"nz-option",26)(48,"nz-option",27)(49,"nz-option",28),t()(),i(50,"div",29)(51,"button",30),f("click",function(){return d(l),u(n.resetFilters())}),_(52,"span",31),r(53," R\xE9initialiser "),t(),i(54,"button",32),f("click",function(){return d(l),u(n.refresh())}),_(55,"span",33),r(56," Actualiser "),t()()()(),i(57,"div",34)(58,"nz-spin",35)(59,"nz-table",36,1)(61,"thead")(62,"tr")(63,"th",37),r(64,"ID"),t(),i(65,"th",38),r(66,"Utilisateur"),t(),i(67,"th",39),r(68,"Titre & Description"),t(),i(69,"th",40),r(70,"Type"),t(),i(71,"th",37),r(72,"Priorit\xE9"),t(),i(73,"th",41),r(74,"Date cr\xE9ation"),t(),i(75,"th",41),r(76,"Statut"),t(),i(77,"th",38),r(78,"R\xE9ponse admin"),t(),i(79,"th",42),r(80,"Actions"),t()()(),i(81,"tbody"),x(82,mt,41,23,"tr",43),t()()(),i(83,"div",44)(84,"nz-pagination",45),f("nzPageIndexChange",function(p){return d(l),u(n.onPageChange(p))})("nzPageSizeChange",function(p){return d(l),u(n.onPageSizeChange(p))}),t(),x(85,pt,1,3,"ng-template",null,2,P),t(),x(87,ct,2,1,"div",46),i(88,"nz-modal",47),S("nzVisibleChange",function(p){return d(l),b(n.isResponseModalVisible,p)||(n.isResponseModalVisible=p),u(p)}),f("nzOnCancel",function(){return d(l),u(n.closeResponseModal())}),x(89,_t,28,13,"div",48),t()()}if(e&2){let l=y(25),c=y(60),p=y(86);o(8),s("nzValue",n.totalReclamations)("nzTitle","Total des r\xE9clamations")("nzValueStyle",h(39,Ke)),o(2),s("nzValue",n.getReclamationsEnAttente())("nzTitle","En attente")("nzValueStyle",h(40,Xe)),o(2),s("nzValue",n.getReclamationsResolues())("nzTitle","R\xE9solues")("nzValueStyle",h(41,Ze)),o(2),s("nzValue",n.getReclamationsRejetees())("nzTitle","Rejet\xE9es")("nzValueStyle",h(42,Je)),o(2),s("nzValue",n.getReclamationsUrgentes())("nzTitle","Urgentes")("nzValueStyle",h(43,Je)),o(6),s("nzSuffix",l),o(),v("ngModel",n.searchTerm),o(6),v("ngModel",n.statusFilter),o(),s("nzValue",3),o(),s("nzValue",4),o(),s("nzValue",6),o(4),v("ngModel",n.typeFilter),o(9),v("ngModel",n.priorityFilter),o(13),s("nzSpinning",n.isLoading),o(),s("nzData",n.reclamations)("nzFrontPagination",!1)("nzScroll",h(44,et)),o(23),s("ngForOf",c.data),o(2),s("nzTotal",n.totalReclamations)("nzPageSize",n.perPage)("nzPageIndex",n.currentPage)("nzShowSizeChanger",!0)("nzShowQuickJumper",!0)("nzShowTotal",p)("nzPageSizeOptions",h(45,tt)),o(3),s("ngIf",n.error&&!n.isLoading),o(),v("nzVisible",n.isResponseModalVisible),s("nzWidth",600)("nzFooter",null)}},dependencies:[L,D,k,A,oe,ee,Q,K,X,Z,ae,te,ne,be,he,_e,fe,ve,xe,Ce,ze,Me,Se,H,q,B,G,J,$,Y,re,j,W,Re,ye,Pe,Ee,pe,se,me,we,Le,Ae,je,We,ge,ue,Be,Ue,le,Ge,U,qe,de,ce,ke,Ve,Oe,Fe,Ie,De,Ne,Ye,He],styles:[".header-section[_ngcontent-%COMP%]{margin-bottom:24px}.header-title[_ngcontent-%COMP%]{margin-bottom:20px}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:28px;font-weight:600}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #f0f0f0;box-shadow:0 2px 4px #00000005;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}.filters-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #f0f0f0;border-radius:8px;padding:20px;margin-bottom:24px;box-shadow:0 1px 2px #00000005}.filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr auto;gap:16px;align-items:end}@media (max-width: 1200px){.filters-row[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr 1fr;gap:12px}}@media (max-width: 768px){.filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.filter-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.table-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;border:1px solid #f0f0f0;box-shadow:0 1px 2px #00000005;overflow:hidden}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background:#fafafa;color:#374151;font-weight:600;font-size:13px;border-bottom:1px solid #f0f0f0;padding:12px 8px}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #f9f9f9;vertical-align:top}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%]{background:#fafafa}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-name[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.user-email[_ngcontent-%COMP%]{font-size:12px;color:#1890ff}.user-subscription[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.user-matricule[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;font-family:monospace;background:#f3f4f6;padding:2px 4px;border-radius:2px;display:inline-block;margin-top:2px}.reclamation-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.reclamation-title[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px;line-height:1.4}.reclamation-description[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4}.date-info[_ngcontent-%COMP%]{font-size:13px;color:#6b7280}.admin-response[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.response-text[_ngcontent-%COMP%]{font-size:13px;color:#374151;line-height:1.4}.response-date[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af}.no-response[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;font-style:italic}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;min-width:200px}.status-actions[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap;justify-content:center}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:12px!important;height:28px!important;padding:0 8px!important;border-radius:4px!important;display:flex!important;align-items:center!important;gap:4px!important;min-width:70px!important;justify-content:center!important}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:11px!important}[_nghost-%COMP%]     .status-actions .ant-btn-primary{background:linear-gradient(135deg,#1890ff,#096dd9)!important;border:none!important;box-shadow:0 2px 4px #1890ff4d!important}[_ngcontent-%COMP%]:is():hover{background:linear-gradient(135deg,#40a9ff,#1890ff)!important;transform:translateY(-1px)!important;box-shadow:0 4px 8px #1890ff66!important}[_nghost-%COMP%]     .status-actions .ant-btn-default{background:#fff!important;border:1px solid #d9d9d9!important;color:#595959!important}[_ngcontent-%COMP%]:is():hover{border-color:#40a9ff!important;color:#1890ff!important;transform:translateY(-1px)!important;box-shadow:0 2px 6px #0000001a!important}[_ngcontent-%COMP%]:is().ant-btn-dangerous{border-color:#ff7875!important;color:#ff4d4f!important}[_ngcontent-%COMP%]:is().ant-btn-dangerous:hover{background:#fff2f0!important;border-color:#ff4d4f!important;color:#cf1322!important}.pagination-container[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center;background:#fafafa}.error-message[_ngcontent-%COMP%]{padding:16px 20px}.empty-state[_ngcontent-%COMP%]{padding:40px;text-align:center}.reclamation-details[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:6px;margin-bottom:16px}.reclamation-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#374151;font-size:16px;font-weight:600}.detail-row[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;align-items:flex-start;gap:8px}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:80px;color:#6b7280;font-size:14px}.description-text[_ngcontent-%COMP%]{background:#fff;padding:8px;border-radius:4px;border:1px solid #e5e7eb;margin-top:4px;font-size:14px;line-height:1.5;color:#374151}.user-section[_ngcontent-%COMP%], .reclamation-section[_ngcontent-%COMP%]{margin-bottom:16px}.user-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .reclamation-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;font-size:14px;font-weight:600;border-bottom:1px solid #e5e7eb;padding-bottom:4px}.modal-actions[_ngcontent-%COMP%]{margin-top:20px;border-top:1px solid #f0f0f0;padding-top:16px}.error-text[_ngcontent-%COMP%]{color:#ff4d4f;font-size:12px;margin-top:4px}@media (max-width: 768px){.actions-container[_ngcontent-%COMP%]{min-width:150px;gap:4px}.status-actions[_ngcontent-%COMP%]{gap:2px}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:11px!important;height:24px!important;padding:0 6px!important;min-width:60px!important}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:10px!important}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}}@media (max-width: 480px){.actions-container[_ngcontent-%COMP%]{min-width:120px}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:10px!important;height:22px!important;padding:0 4px!important;min-width:50px!important}[_ngcontent-%COMP%]:is()   span[_ngcontent-%COMP%]:not(.anticon){display:none}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:9px!important;margin:0!important}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:12px}}"]})};export{Qe as ComplaintsComponent};
