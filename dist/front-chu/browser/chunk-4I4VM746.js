import{a as g}from"./chunk-M37DKQAG.js";import{c as m,g as d}from"./chunk-YLHBJJO7.js";import{_ as o,da as u,ia as c}from"./chunk-EIVDWLNO.js";import{a as s,b as i}from"./chunk-4CLCTAJ7.js";var l=class p{constructor(e){this.http=e}API_URL=g.apiUrl;creerEvenement(e,t){if(t&&t.length>0){let n=new FormData;return n.append("id_type_evenement",e.id_type_evenement.toString()),n.append("id_souscription",e.id_souscription.toString()),n.append("titre",e.titre),n.append("description",e.description),n.append("date_debut_evenement",e.date_debut_evenement),n.append("date_fin_evenement",e.date_fin_evenement),n.append("lieu",e.lieu),e.est_public?n.append("est_public","1"):n.append("est_public","0"),e.type_evenement_libre&&n.append("type_evenement_libre",e.type_evenement_libre),t.forEach(r=>{n.append("documents[]",r,r.name)}),this.http.post(`${this.API_URL}/evenements`,n).pipe(o(r=>{console.log("\xC9v\xE9nement cr\xE9\xE9 avec documents:",r)}))}else{let n=i(s({},e),{est_public:e.est_public===!0});return this.http.post(`${this.API_URL}/evenements`,n,{headers:{"Content-Type":"application/json"}}).pipe(o(r=>{console.log("\xC9v\xE9nement cr\xE9\xE9 sans documents:",r)}))}}getMesEvenements(e){let t=new m;return e&&(e.page&&(t=t.set("page",e.page.toString())),e.per_page&&(t=t.set("per_page",e.per_page.toString())),e.statut&&(t=t.set("statut",e.statut)),e.type_evenement&&(t=t.set("type_evenement",e.type_evenement.toString())),e.priorite&&(t=t.set("priorite",e.priorite)),e.date_debut&&(t=t.set("date_debut",e.date_debut)),e.date_fin&&(t=t.set("date_fin",e.date_fin)),e.search&&(t=t.set("search",e.search)),e.souscription_id&&(t=t.set("souscription_id",e.souscription_id.toString()))),this.http.get(`${this.API_URL}/evenements`,{params:t}).pipe(o(n=>{console.log("\xC9v\xE9nements r\xE9cup\xE9r\xE9s:",n)}))}getEvenementsByStatut(e,t){let n=i(s({},t),{statut:e});return this.getMesEvenements(n)}getEvenementsByType(e,t){let n=i(s({},t),{type_evenement:e});return this.getMesEvenements(n)}getEvenementsBySouscription(e,t){let n=i(s({},t),{souscription_id:e});return this.getMesEvenements(n)}rechercherEvenements(e,t){let n=i(s({},t),{search:e});return this.getMesEvenements(n)}getStatutClass(e){switch(e.toLowerCase()){case"planifie":return"badge-info";case"en_cours":return"badge-primary";case"termine":return"badge-success";case"annule":return"badge-danger";case"reporte":return"badge-warning";case"suspendu":return"badge-secondary";default:return"badge-light"}}getStatutLabel(e){switch(e.toLowerCase()){case"planifie":return"Planifi\xE9";case"en_cours":return"En cours";case"termine":return"Termin\xE9";case"annule":return"Annul\xE9";case"reporte":return"Report\xE9";case"suspendu":return"Suspendu";default:return e}}getPrioriteClass(e){switch(e.toLowerCase()){case"haute":return"priority-high";case"normale":return"priority-normal";case"basse":return"priority-low";case"urgente":return"priority-urgent";default:return"priority-normal"}}getPrioriteLabel(e){switch(e.toLowerCase()){case"haute":return"Haute";case"normale":return"Normale";case"basse":return"Basse";case"urgente":return"Urgente";default:return e}}getJoursRestants(e){let t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/(1e3*60*60*24))}isRecent(e){let t=new Date,n=new Date(e),r=Math.ceil((t.getTime()-n.getTime())/(1e3*60*60*24));return Math.abs(r)<=7}formatCurrency(e){return e==null?"N/A":new Intl.NumberFormat("fr-CI",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e)}getAllEvenementsFlat(e){let t=[];return e.forEach(n=>{n.mois.forEach(r=>{t.push(...r.evenements)})}),t}groupEventsByMonth(e){return e.reduce((t,n)=>{let r=new Date(n.date_debut_evenement),a=`${r.getFullYear()}-${r.getMonth()+1}`;return t[a]||(t[a]=[]),t[a].push(n),t},{})}static \u0275fac=function(t){return new(t||p)(c(d))};static \u0275prov=u({token:p,factory:p.\u0275fac,providedIn:"root"})};export{l as a};
