import{a as dt}from"./chunk-BX5IBYDZ.js";import{a as st,b as lt,c as pt}from"./chunk-EK3TWWRN.js";import{a as ot,b as at}from"./chunk-HTLBF6DE.js";import"./chunk-Y7M66OUD.js";import{a as Ge,b as He,c as Ye,d as Je,e as Qe}from"./chunk-BNFSWPKA.js";import{a as qe,b as Be}from"./chunk-LJV24WEU.js";import{b as it}from"./chunk-BCOKKDGK.js";import{b as rt}from"./chunk-NE5SRTVG.js";import{a as tt,b as nt}from"./chunk-R6I3ZYWE.js";import{b as ae,c as se,d as le}from"./chunk-2CDAYGND.js";import{b as te}from"./chunk-LBGCJ5DM.js";import{c as $e,d as Le}from"./chunk-YGIHEPSV.js";import{a as ke,b as De,c as Ue,e as je}from"./chunk-CGU7QHHX.js";import{e as We}from"./chunk-7SAAJH44.js";import{a as Ze,b as et}from"./chunk-Z7HGAQMR.js";import{i as Re,j as Me,k as Pe,l as Te,m as Oe,n as Ae,o as Ie,p as Ve}from"./chunk-ZFV5NHAD.js";import"./chunk-VWKRELSZ.js";import{a as Ce,b as ye}from"./chunk-E44DIQ7Z.js";import{a as we,b as Ee}from"./chunk-OSEQ4WIA.js";import{a as Fe,b as Ne}from"./chunk-5HO2BJJL.js";import"./chunk-6XHWMXPL.js";import{d as Xe,e as Ke}from"./chunk-66NTQKWN.js";import"./chunk-WVDIGHRG.js";import{a as he,b as Se,c as be}from"./chunk-V73OBEQV.js";import{c as ze}from"./chunk-WGMYJEJ4.js";import"./chunk-465NLBOU.js";import{a as ne,b as ie,d as re,f as oe}from"./chunk-IXUSDIY2.js";import"./chunk-CZTCGH7Y.js";import{A as xe,B as ve,d as pe,e as h,g as de,h as me,m as ce,n as ue,q as _e,r as fe,z as ge}from"./chunk-XBYNCXSQ.js";import"./chunk-DST4DQF7.js";import{qa as Z,sa as ee}from"./chunk-PYGBBRX5.js";import{a as L}from"./chunk-PJQGREK5.js";import"./chunk-4FK3KGSF.js";import"./chunk-PA5JYGXZ.js";import"./chunk-HPXRSP2X.js";import{c as j,g as $}from"./chunk-YLHBJJO7.js";import{A as K,s as J,t as Q,z as X}from"./chunk-H734YLDB.js";import{Aa as u,Ac as U,E as M,Mb as i,Nb as t,Ob as _,Sb as z,Y as b,Yb as x,_b as d,da as V,f as B,fb as a,g as E,gb as P,gc as I,hc as r,ia as F,ic as y,jc as v,kc as N,lc as H,mc as T,nc as O,o as R,oa as G,oc as A,qc as Y,r as C,rc as w,vb as g,wc as k,za as c,zb as p,zc as D}from"./chunk-EIVDWLNO.js";import"./chunk-4CLCTAJ7.js";var W=class o{constructor(n){this.http=n}API_BASE_URL=L.apiUrl;TYPES_RECOMPENSES_ENDPOINT=`${this.API_BASE_URL}/type-recompenses`;typesRecompensesSubject=new E([]);typesRecompenses$=this.typesRecompensesSubject.asObservable();loadingSubject=new E(!1);loading$=this.loadingSubject.asObservable();getTypesRecompenses(n=1,e=15){this.loadingSubject.next(!0);let s=new j().set("page",n.toString()).set("per_page",e.toString());return this.http.get(this.TYPES_RECOMPENSES_ENDPOINT,{params:s}).pipe(C(l=>(this.typesRecompensesSubject.next(l.data),this.loadingSubject.next(!1),l)),M(l=>(this.loadingSubject.next(!1),console.error("Erreur lors du chargement des types de r\xE9compenses:",l),R(()=>new Error("Erreur lors du chargement des types de r\xE9compenses")))))}getAllTypesRecompenses(){return this.getTypesRecompenses(1,1e3).pipe(C(n=>n.data))}getTypeRecompenseById(n){return this.http.get(`${this.TYPES_RECOMPENSES_ENDPOINT}/${n}`).pipe(C(e=>e.data),M(e=>(console.error("Erreur lors du chargement du type de r\xE9compense:",e),R(()=>new Error("Type de r\xE9compense non trouv\xE9")))))}resetState(){this.typesRecompensesSubject.next([]),this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||o)(F($))};static \u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"})};var q=class o{constructor(n){this.http=n}API_BASE_URL=L.apiUrl;UTILISATEURS_SOUSCRIPTIONS_ENDPOINT=`${this.API_BASE_URL}/utilisateurs-souscriptions`;utilisateursSouscriptionsSubject=new E([]);utilisateursSouscriptions$=this.utilisateursSouscriptionsSubject.asObservable();loadingSubject=new E(!1);loading$=this.loadingSubject.asObservable();getUtilisateursSouscriptions(n=1,e=15){this.loadingSubject.next(!0);let s=new j().set("page",n.toString()).set("per_page",e.toString());return this.http.get(this.UTILISATEURS_SOUSCRIPTIONS_ENDPOINT,{params:s}).pipe(C(l=>(this.utilisateursSouscriptionsSubject.next(l.data),this.loadingSubject.next(!1),l)),M(l=>(this.loadingSubject.next(!1),console.error("Erreur lors du chargement des utilisateurs avec souscriptions:",l),R(()=>new Error("Erreur lors du chargement des utilisateurs avec souscriptions")))))}getAllUtilisateursSouscriptions(){return this.getUtilisateursSouscriptions(1,1e3).pipe(C(n=>n.data))}getUtilisateurSouscriptionsById(n){return this.http.get(`${this.UTILISATEURS_SOUSCRIPTIONS_ENDPOINT}/${n}`).pipe(C(e=>e.data),M(e=>(console.error("Erreur lors du chargement de l'utilisateur avec souscriptions:",e),R(()=>new Error("Utilisateur non trouv\xE9")))))}getSouscriptionsByUtilisateur(n){return this.getAllUtilisateursSouscriptions().pipe(C(e=>{let s=e.find(l=>l.id_utilisateur===n);return s?s.souscriptions:[]}))}getFullName(n){return`${n.prenom} ${n.nom}`}formatSouscription(n){return`#${n.id_souscription} - ${n.nombre_terrains} terrain(s) - ${this.formatCurrency(n.montant_mensuel)}/mois`}formatCurrency(n){let e=typeof n=="string"?parseFloat(n):n;return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e)}resetState(){this.utilisateursSouscriptionsSubject.next([]),this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||o)(F($))};static \u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"})};var gt=()=>({color:"#1890ff"}),xt=()=>({color:"#faad14"}),vt=()=>({color:"#52c41a"}),zt=()=>({color:"#ff4d4f"}),ht=()=>({x:"1600px"}),St=()=>[10,15,20,50];function bt(o,n){o&1&&_(0,"span",45)}function Ct(o,n){if(o&1&&(i(0,"div",66),r(1),t()),o&2){let e=d().$implicit,s=d();a(),y(s.getUserMatricule(e))}}function yt(o,n){if(o&1&&(i(0,"div",67),r(1),t()),o&2){let e=d().$implicit,s=d();a(),v(" Effective: ",s.formatDate(e.date_attribution_effective)," ")}}function wt(o,n){if(o&1&&(i(0,"div",68)(1,"div",69),r(2),k(3,"slice"),t()()),o&2){let e=d().$implicit;a(2),N("",D(3,2,e.commentaire_admin,0,50),"",e.commentaire_admin.length>50?"...":"","")}}function Et(o,n){o&1&&(i(0,"span",70),r(1,"Aucun commentaire"),t())}function Rt(o,n){if(o&1){let e=z();i(0,"div",71)(1,"button",72),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsAttributed(l))}),_(2,"span",73),r(3," Attribuer "),t(),i(4,"button",74),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsCancelled(l))}),_(5,"span",75),r(6," Annuler "),t(),i(7,"button",76),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.openStatusModal(l))}),_(8,"span",77),r(9," Modifier "),t()()}}function Mt(o,n){if(o&1){let e=z();i(0,"div",71)(1,"button",78),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsDue(l))}),_(2,"span",79),r(3," Remettre due "),t(),i(4,"button",74),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsCancelled(l))}),_(5,"span",75),r(6," Annuler "),t(),i(7,"button",76),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.openStatusModal(l))}),_(8,"span",77),r(9," Modifier "),t()()}}function Pt(o,n){if(o&1){let e=z();i(0,"div",71)(1,"button",78),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsDue(l))}),_(2,"span",79),r(3," Remettre due "),t(),i(4,"button",72),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.markAsAttributed(l))}),_(5,"span",73),r(6," Attribuer "),t(),i(7,"button",76),x("click",function(){c(e);let l=d().$implicit,m=d();return u(m.openStatusModal(l))}),_(8,"span",77),r(9," Modifier "),t()()}}function Tt(o,n){if(o&1&&(i(0,"tr")(1,"td")(2,"strong"),r(3),t()(),i(4,"td")(5,"div",46)(6,"div",47)(7,"div",48),r(8),t(),i(9,"div",49),r(10),t(),i(11,"div",50),r(12),t(),g(13,Ct,2,1,"div",51),t()()(),i(14,"td")(15,"div",52)(16,"div",53),r(17),t(),i(18,"div",54),r(19),t()()(),i(20,"td")(21,"div",55)(22,"div",56),r(23),k(24,"slice"),t(),i(25,"div",57),r(26),k(27,"slice"),t()()(),i(28,"td")(29,"div",58),r(30),t()(),i(31,"td")(32,"div",59)(33,"div"),r(34),t(),g(35,yt,2,1,"div",60),t()(),i(36,"td")(37,"nz-tag",61),r(38),t()(),i(39,"td"),g(40,wt,4,6,"div",62)(41,Et,2,0,"ng-template",null,3,U),t(),i(43,"td",63)(44,"div",64),g(45,Rt,10,0,"div",65)(46,Mt,10,0,"div",65)(47,Pt,10,0,"div",65),t()()()),o&2){let e=n.$implicit,s=I(42),l=d();a(3),v("#",e.id_recompense,""),a(5),y(l.getUserFullName(e)),a(2),y(l.getUserEmail(e)),a(2),v("Souscription #",e.id_souscription,""),a(),p("ngIf",l.getUserMatricule(e)!=="N/A"),a(4),y((e.type_recompense==null?null:e.type_recompense.libelle_type_recompense)||"N/A"),a(2),y((e.type_recompense==null?null:e.type_recompense.description_type)||""),a(4),N("",D(24,21,e.description,0,80),"",e.description.length>80?"...":"",""),a(3),N("",D(27,25,e.motif_recompense,0,60),"",e.motif_recompense.length>60?"...":"",""),a(4),v(" ",e.periode_merite," "),a(4),y(l.formatDate(e.date_attribution)),a(),p("ngIf",e.date_attribution_effective),a(2),p("nzColor",l.getStatusDisplay(e).color),a(),v(" ",l.getStatusDisplay(e).label," "),a(2),p("ngIf",e.commentaire_admin)("ngIfElse",s),a(5),p("ngIf",e.statut_recompense==="due"),a(),p("ngIf",e.statut_recompense==="attribuee"),a(),p("ngIf",e.statut_recompense==="annulee")}}function Ot(o,n){if(o&1&&r(0),o&2){let e=n.$implicit,s=n.range;H(" Affichage ",s[0],"-",s[1]," de ",e," r\xE9compenses ")}}function At(o,n){if(o&1&&(i(0,"div",80),_(1,"nz-alert",81),t()),o&2){let e=d();a(),p("nzMessage",e.error)}}function It(o,n){if(o&1&&(i(0,"div",95)(1,"strong"),r(2,"Matricule:"),t(),r(3),t()),o&2){let e=d(3);a(3),v(" ",e.getUserMatricule(e.selectedRecompense)," ")}}function Vt(o,n){if(o&1&&(i(0,"div",93)(1,"h4"),r(2),t(),i(3,"div",94)(4,"h5"),r(5,"Utilisateur"),t(),i(6,"div",95)(7,"strong"),r(8,"Nom:"),t(),r(9),t(),i(10,"div",95)(11,"strong"),r(12,"Email:"),t(),r(13),t(),g(14,It,4,1,"div",96),i(15,"div",95)(16,"strong"),r(17,"Souscription:"),t(),r(18),t()(),_(19,"nz-divider",97),i(20,"div",98)(21,"h5"),r(22,"R\xE9compense"),t(),i(23,"div",95)(24,"strong"),r(25,"Type:"),t(),r(26),t(),i(27,"div",95)(28,"strong"),r(29,"P\xE9riode de m\xE9rite:"),t(),r(30),t(),i(31,"div",95)(32,"strong"),r(33,"Date attribution:"),t(),r(34),t(),i(35,"div",95)(36,"strong"),r(37,"Description:"),t(),i(38,"div",99),r(39),t()(),i(40,"div",95)(41,"strong"),r(42,"Motif:"),t(),i(43,"div",100),r(44),t()()()()),o&2){let e=d(2);a(2),v("D\xE9tails de la r\xE9compense #",e.selectedRecompense.id_recompense,""),a(7),v(" ",e.getUserFullName(e.selectedRecompense)," "),a(4),v(" ",e.getUserEmail(e.selectedRecompense)," "),a(),p("ngIf",e.getUserMatricule(e.selectedRecompense)!=="N/A"),a(4),v(" #",e.selectedRecompense.id_souscription," "),a(),p("nzDashed",!0),a(7),v(" ",(e.selectedRecompense.type_recompense==null?null:e.selectedRecompense.type_recompense.libelle_type_recompense)||"N/A"," "),a(4),v(" ",e.selectedRecompense.periode_merite," "),a(4),v(" ",e.formatDate(e.selectedRecompense.date_attribution)," "),a(5),y(e.selectedRecompense.description),a(5),y(e.selectedRecompense.motif_recompense)}}function Ft(o,n){if(o&1){let e=z();i(0,"div"),g(1,Vt,45,11,"div",82),_(2,"nz-divider"),i(3,"form",83),x("ngSubmit",function(){c(e);let l=d();return u(l.updateStatus())}),i(4,"div",84)(5,"div",85)(6,"nz-form-item")(7,"nz-form-label",86),r(8,"Nouveau statut"),t(),i(9,"nz-form-control",87)(10,"nz-select",88),_(11,"nz-option",15)(12,"nz-option",16)(13,"nz-option",17),t()()()()(),i(14,"div",89)(15,"div",90)(16,"button",91),x("click",function(){c(e);let l=d();return u(l.closeStatusModal())}),r(17," Annuler "),t(),i(18,"button",92),x("click",function(){c(e);let l=d();return u(l.updateStatus())}),r(19," Mettre \xE0 jour le statut "),t()()()()()}if(o&2){let e=d();a(),p("ngIf",e.selectedRecompense),a(2),p("formGroup",e.statusForm),a(),p("nzGutter",16),a(3),p("nzSpan",6),a(2),p("nzSpan",18),a(5),p("nzGutter",16),a(4),p("nzLoading",e.isLoading)}}function Nt(o,n){if(o&1&&_(0,"nz-option",118),o&2){let e=n.$implicit,s=d(3);p("nzValue",e.id_utilisateur)("nzLabel",s.getUtilisateurDisplay(e))}}function kt(o,n){o&1&&(i(0,"div",119),r(1," Veuillez s\xE9lectionner un utilisateur "),t())}function Dt(o,n){if(o&1&&(i(0,"div",120)(1,"h5"),r(2,"Informations utilisateur"),t(),i(3,"div",121)(4,"div",122)(5,"strong"),r(6,"Nom:"),t(),r(7),t(),i(8,"div",122)(9,"strong"),r(10,"Email:"),t(),r(11),t(),i(12,"div",122)(13,"strong"),r(14,"T\xE9l\xE9phone:"),t(),r(15),t(),i(16,"div",122)(17,"strong"),r(18,"Service:"),t(),r(19),t()()()),o&2){let e=d(3);a(7),v(" ",e.getUtilisateurDisplay(e.selectedUtilisateur)," "),a(4),v(" ",e.selectedUtilisateur.email," "),a(4),v(" ",e.selectedUtilisateur.telephone," "),a(4),v(" ",e.selectedUtilisateur.service," ")}}function Ut(o,n){if(o&1){let e=z();i(0,"div")(1,"h4"),r(2,"S\xE9lectionner un utilisateur"),t(),i(3,"nz-form-item")(4,"nz-form-label",113),r(5,"Utilisateur"),t(),i(6,"nz-form-control")(7,"nz-select",114),x("ngModelChange",function(l){c(e);let m=d(2);return u(m.onUtilisateurChange(l))}),g(8,Nt,1,2,"nz-option",115),t(),g(9,kt,2,0,"div",116),t()(),g(10,Dt,20,4,"div",117),t()}if(o&2){let e,s=d(2);a(8),p("ngForOf",s.utilisateursSouscriptions),a(),p("ngIf",((e=s.addRewardForm.get("selectedUtilisateur"))==null?null:e.invalid)&&((e=s.addRewardForm.get("selectedUtilisateur"))==null?null:e.touched)),a(),p("ngIf",s.selectedUtilisateur)}}function jt(o,n){if(o&1&&_(0,"nz-option",118),o&2){let e=n.$implicit,s=d(3);p("nzValue",e.id_souscription)("nzLabel",s.getSouscriptionDisplay(e))}}function $t(o,n){o&1&&(i(0,"div",119),r(1," Veuillez s\xE9lectionner une souscription "),t())}function Lt(o,n){if(o&1&&(i(0,"div",125)(1,"h5"),r(2,"D\xE9tails de la souscription"),t(),i(3,"div",121)(4,"div",122)(5,"strong"),r(6,"ID:"),t(),r(7),t(),i(8,"div",122)(9,"strong"),r(10,"Terrains:"),t(),r(11),t(),i(12,"div",122)(13,"strong"),r(14,"Montant mensuel:"),t(),r(15),t(),i(16,"div",122)(17,"strong"),r(18,"Statut:"),t(),r(19),t(),i(20,"div",122)(21,"strong"),r(22,"Date d\xE9but:"),t(),r(23),t(),i(24,"div",122)(25,"strong"),r(26,"Date fin pr\xE9vue:"),t(),r(27),t()()()),o&2){let e=d(3);a(7),v(" #",e.selectedSouscription.id_souscription," "),a(4),v(" ",e.selectedSouscription.nombre_terrains," "),a(4),v(" ",e.formatCurrency(e.selectedSouscription.montant_mensuel)," "),a(4),v(" ",e.selectedSouscription.statut_souscription," "),a(4),v(" ",e.formatDate(e.selectedSouscription.date_debut_paiement)," "),a(4),v(" ",e.formatDate(e.selectedSouscription.date_fin_prevue)," ")}}function Wt(o,n){if(o&1){let e=z();i(0,"div")(1,"h4"),r(2,"S\xE9lectionner une souscription"),t(),i(3,"nz-form-item")(4,"nz-form-label",113),r(5,"Souscription"),t(),i(6,"nz-form-control")(7,"nz-select",123),x("ngModelChange",function(l){c(e);let m=d(2);return u(m.onSouscriptionChange(l))}),g(8,jt,1,2,"nz-option",115),t(),g(9,$t,2,0,"div",116),t()(),g(10,Lt,28,6,"div",124),t()}if(o&2){let e,s=d(2);a(8),p("ngForOf",s.availableSouscriptions),a(),p("ngIf",((e=s.addRewardForm.get("id_souscription"))==null?null:e.invalid)&&((e=s.addRewardForm.get("id_souscription"))==null?null:e.touched)),a(),p("ngIf",s.selectedSouscription)}}function qt(o,n){if(o&1&&_(0,"nz-option",118),o&2){let e=n.$implicit;p("nzValue",e.id_type_recompense)("nzLabel",e.libelle_type_recompense)}}function Bt(o,n){o&1&&(i(0,"div",119),r(1," Veuillez s\xE9lectionner un type de r\xE9compense "),t())}function Gt(o,n){if(o&1&&(i(0,"div",122)(1,"strong"),r(2,"Valeur:"),t(),r(3),t()),o&2){let e=d(4);a(3),v(" ",e.formatCurrency(e.selectedTypeRecompense.valeur_monetaire)," ")}}function Ht(o,n){if(o&1&&(i(0,"div",128)(1,"h5"),r(2,"D\xE9tails du type de r\xE9compense"),t(),i(3,"div",121)(4,"div",122)(5,"strong"),r(6,"Libell\xE9:"),t(),r(7),t(),i(8,"div",122)(9,"strong"),r(10,"Description:"),t(),r(11),t(),i(12,"div",122)(13,"strong"),r(14,"Type:"),t(),r(15),t(),g(16,Gt,4,1,"div",129),i(17,"div",122)(18,"strong"),r(19,"Conditions:"),t(),r(20),t()()()),o&2){let e=d(3);a(7),v(" ",e.selectedTypeRecompense.libelle_type_recompense," "),a(4),v(" ",e.selectedTypeRecompense.description_type," "),a(4),v(" ",e.selectedTypeRecompense.est_monetaire?"Mon\xE9taire":"Non mon\xE9taire"," "),a(),p("ngIf",e.selectedTypeRecompense.valeur_monetaire),a(4),v(" ",e.selectedTypeRecompense.conditions_attribution," ")}}function Yt(o,n){if(o&1){let e=z();i(0,"div")(1,"h4"),r(2,"S\xE9lectionner le type de r\xE9compense"),t(),i(3,"nz-form-item")(4,"nz-form-label",113),r(5,"Type de r\xE9compense"),t(),i(6,"nz-form-control")(7,"nz-select",126),x("ngModelChange",function(l){c(e);let m=d(2);return u(m.onTypeRecompenseChange(l))}),g(8,qt,1,2,"nz-option",115),t(),g(9,Bt,2,0,"div",116),t()(),g(10,Ht,21,5,"div",127),t()}if(o&2){let e,s=d(2);a(8),p("ngForOf",s.typesRecompenses),a(),p("ngIf",((e=s.addRewardForm.get("id_type_recompense"))==null?null:e.invalid)&&((e=s.addRewardForm.get("id_type_recompense"))==null?null:e.touched)),a(),p("ngIf",s.selectedTypeRecompense)}}function Jt(o,n){o&1&&(i(0,"div",119),r(1," La description est requise "),t())}function Qt(o,n){o&1&&(i(0,"div",119),r(1," Le motif est requis "),t())}function Xt(o,n){o&1&&(i(0,"div",119),r(1," La p\xE9riode est requise "),t())}function Kt(o,n){o&1&&(i(0,"div",119),r(1," La date d'attribution est requise "),t())}function Zt(o,n){o&1&&(i(0,"div",119),r(1," Le statut est requis "),t())}function en(o,n){if(o&1&&(i(0,"div")(1,"h4"),r(2,"Informations compl\xE9mentaires"),t(),i(3,"div",84)(4,"div",130)(5,"nz-form-item")(6,"nz-form-label",113),r(7,"Description"),t(),i(8,"nz-form-control")(9,"textarea",131),r(10,"                "),t(),g(11,Jt,2,0,"div",116),t()()(),i(12,"div",130)(13,"nz-form-item")(14,"nz-form-label",113),r(15,"Motif de la r\xE9compense"),t(),i(16,"nz-form-control")(17,"textarea",132),r(18,"                "),t(),g(19,Qt,2,0,"div",116),t()()()(),i(20,"div",84)(21,"div",133)(22,"nz-form-item")(23,"nz-form-label",113),r(24,"P\xE9riode de m\xE9rite"),t(),i(25,"nz-form-control"),_(26,"input",134),g(27,Xt,2,0,"div",116),t()()(),i(28,"div",133)(29,"nz-form-item")(30,"nz-form-label",113),r(31,"Date d'attribution"),t(),i(32,"nz-form-control"),_(33,"nz-date-picker",135),g(34,Kt,2,0,"div",116),t()()()(),i(35,"div",84)(36,"div",130)(37,"nz-form-item")(38,"nz-form-label",113),r(39,"Statut de la r\xE9compense"),t(),i(40,"nz-form-control")(41,"nz-select",88),_(42,"nz-option",15)(43,"nz-option",16)(44,"nz-option",17),t(),g(45,Zt,2,0,"div",116),t()()(),i(46,"div",130)(47,"nz-form-item")(48,"nz-form-label"),r(49,"Date d'attribution effective"),t(),i(50,"nz-form-control"),_(51,"nz-date-picker",136),t()()()(),i(52,"nz-form-item")(53,"nz-form-label"),r(54,"Commentaire administrateur"),t(),i(55,"nz-form-control")(56,"textarea",137),r(57,"            "),t()()()()),o&2){let e,s,l,m,f,S=d(2);a(3),p("nzGutter",16),a(8),p("ngIf",((e=S.addRewardForm.get("description"))==null?null:e.invalid)&&((e=S.addRewardForm.get("description"))==null?null:e.touched)),a(8),p("ngIf",((s=S.addRewardForm.get("motif_recompense"))==null?null:s.invalid)&&((s=S.addRewardForm.get("motif_recompense"))==null?null:s.touched)),a(),p("nzGutter",16),a(7),p("ngIf",((l=S.addRewardForm.get("periode_merite"))==null?null:l.invalid)&&((l=S.addRewardForm.get("periode_merite"))==null?null:l.touched)),a(7),p("ngIf",((m=S.addRewardForm.get("date_attribution"))==null?null:m.invalid)&&((m=S.addRewardForm.get("date_attribution"))==null?null:m.touched)),a(),p("nzGutter",16),a(10),p("ngIf",((f=S.addRewardForm.get("statut_recompense"))==null?null:f.invalid)&&((f=S.addRewardForm.get("statut_recompense"))==null?null:f.touched))}}function tn(o,n){if(o&1){let e=z();i(0,"button",138),x("click",function(){c(e);let l=d(2);return u(l.nextStep())}),r(1," Suivant "),_(2,"span",139),t()}if(o&2){let e=d(2);p("disabled",!e.isCurrentStepValid())}}function nn(o,n){if(o&1){let e=z();i(0,"button",140),x("click",function(){c(e);let l=d(2);return u(l.submitAddReward())}),_(1,"span",141),r(2," Enregistrer la r\xE9compense "),t()}if(o&2){let e=d(2);p("nzLoading",e.isSubmittingReward)("disabled",!e.addRewardForm.valid)}}function rn(o,n){if(o&1){let e=z();i(0,"div")(1,"nz-steps",101),_(2,"nz-step",102)(3,"nz-step",103)(4,"nz-step",104)(5,"nz-step",105),t(),i(6,"form",106),g(7,Ut,11,3,"div",107)(8,Wt,11,3,"div",107)(9,Yt,11,3,"div",107)(10,en,58,8,"div",107),t(),i(11,"div",108)(12,"button",109),x("click",function(){c(e);let l=d();return u(l.previousStep())}),_(13,"span",110),r(14," Pr\xE9c\xE9dent "),t(),i(15,"button",23),x("click",function(){c(e);let l=d();return u(l.closeAddRewardModal())}),r(16," Annuler "),t(),g(17,tn,3,1,"button",111)(18,nn,3,2,"button",112),t()()}if(o&2){let e=d();a(),p("nzCurrent",e.currentStep),a(5),p("formGroup",e.addRewardForm),a(),p("ngIf",e.currentStep===0),a(),p("ngIf",e.currentStep===1),a(),p("ngIf",e.currentStep===2),a(),p("ngIf",e.currentStep===3),a(2),p("disabled",e.currentStep===0),a(5),p("ngIf",e.currentStep<3),a(),p("ngIf",e.currentStep===3)}}var ct=class o{constructor(n,e,s,l,m){this.recompensesService=n;this.typesRecompensesService=e;this.utilisateursSouscriptionsService=s;this.fb=l;this.message=m;this.statusForm=this.fb.group({statut_recompense:["",[h.required]]}),this.addRewardForm=this.fb.group({selectedUtilisateur:["",[h.required]],id_souscription:["",[h.required]],id_type_recompense:["",[h.required]],description:["",[h.required,h.minLength(10)]],motif_recompense:["",[h.required,h.minLength(5)]],periode_merite:["",[h.required]],statut_recompense:["due",[h.required]],date_attribution:[new Date,[h.required]],date_attribution_effective:[null],commentaire_admin:[""]})}destroy$=new B;recompenses=[];totalRecompenses=0;isLoading=!1;error=null;currentPage=1;perPage=15;pagination=null;searchTerm="";statusFilter="";typeFilter=null;isStatusModalVisible=!1;selectedRecompense=null;statusForm;isAddRewardModalVisible=!1;addRewardForm;currentStep=0;isSubmittingReward=!1;utilisateursSouscriptions=[];typesRecompenses=[];availableSouscriptions=[];selectedUtilisateur=null;selectedSouscription=null;selectedTypeRecompense=null;ngOnInit(){this.loadRecompenses(),this.subscribeToService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}subscribeToService(){this.recompensesService.recompenses$.pipe(b(this.destroy$)).subscribe(n=>{this.recompenses=n}),this.recompensesService.loading$.pipe(b(this.destroy$)).subscribe(n=>{this.isLoading=n}),this.recompensesService.pagination$.pipe(b(this.destroy$)).subscribe(n=>{this.pagination=n,n&&(this.totalRecompenses=n.total)})}loadRecompenses(){this.error=null;let n={};this.statusFilter&&(n.statut=this.statusFilter),this.typeFilter&&(n.type_recompense=this.typeFilter),this.recompensesService.getRecompenses(this.currentPage,this.perPage,n).pipe(b(this.destroy$)).subscribe({next:()=>{},error:e=>{this.error="Erreur lors du chargement des r\xE9compenses",console.error(e)}})}onSearchChange(){this.loadRecompenses()}onStatusFilterChange(){this.currentPage=1,this.loadRecompenses()}onTypeFilterChange(){this.currentPage=1,this.loadRecompenses()}resetFilters(){this.searchTerm="",this.statusFilter="",this.typeFilter=null,this.currentPage=1,this.loadRecompenses()}refresh(){this.loadRecompenses()}onPageChange(n){this.currentPage=n,this.loadRecompenses()}onPageSizeChange(n){this.perPage=n,this.currentPage=1,this.loadRecompenses()}openStatusModal(n){this.selectedRecompense=n,this.statusForm.patchValue({statut_recompense:n.statut_recompense}),this.isStatusModalVisible=!0}closeStatusModal(){this.isStatusModalVisible=!1,this.selectedRecompense=null,this.statusForm.reset()}updateStatus(){if(this.statusForm.valid&&this.selectedRecompense){let n=this.statusForm.get("statut_recompense")?.value;this.recompensesService.updateStatutRecompense(this.selectedRecompense.id_recompense,n).pipe(b(this.destroy$)).subscribe({next:()=>{this.message.success("Statut mis \xE0 jour avec succ\xE8s"),this.loadRecompenses(),this.closeStatusModal()},error:e=>{this.message.error("Erreur lors de la mise \xE0 jour du statut"),console.error(e)}})}}markAsDue(n){this.quickStatusUpdate(n,"due")}markAsAttributed(n){this.quickStatusUpdate(n,"attribuee")}markAsCancelled(n){this.quickStatusUpdate(n,"annulee")}quickStatusUpdate(n,e){this.recompensesService.updateStatutRecompense(n.id_recompense,e).pipe(b(this.destroy$)).subscribe({next:()=>{this.message.success(`Statut mis \xE0 jour vers "${this.getStatusLabel(e)}"`),this.loadRecompenses()},error:s=>{this.message.error("Erreur lors de la mise \xE0 jour du statut"),console.error(s)}})}getUserFullName(n){if(n.souscription?.utilisateur){let e=n.souscription.utilisateur;return`${e.prenom} ${e.nom}`}return"N/A"}getUserEmail(n){return n.souscription?.utilisateur?.email||"N/A"}getUserMatricule(n){return n.souscription?.utilisateur?.matricule||"N/A"}getStatusDisplay(n){return{due:{label:"Due",color:"orange"},attribuee:{label:"Attribu\xE9e",color:"green"},annulee:{label:"Annul\xE9e",color:"red"}}[n.statut_recompense]||{label:n.statut_recompense,color:"default"}}getStatusLabel(n){return this.recompensesService.getStatusLabel(n)}formatDate(n){return this.recompensesService.formatDate(n)}formatCurrency(n){return this.recompensesService.formatCurrency(n)}getRecompensesDues(){return this.recompenses.filter(n=>n.statut_recompense==="due").length}getRecompensesAttribuees(){return this.recompenses.filter(n=>n.statut_recompense==="attribuee").length}getRecompensesAnnulees(){return this.recompenses.filter(n=>n.statut_recompense==="annulee").length}openAddRewardModal(){this.isAddRewardModalVisible=!0,this.currentStep=0,this.resetAddRewardForm(),this.loadFormData()}closeAddRewardModal(){this.isAddRewardModalVisible=!1,this.currentStep=0,this.resetAddRewardForm()}resetAddRewardForm(){this.addRewardForm.reset(),this.addRewardForm.patchValue({statut_recompense:"due",date_attribution:new Date}),this.selectedUtilisateur=null,this.selectedSouscription=null,this.selectedTypeRecompense=null,this.availableSouscriptions=[]}loadFormData(){this.utilisateursSouscriptionsService.getAllUtilisateursSouscriptions().pipe(b(this.destroy$)).subscribe({next:n=>{this.utilisateursSouscriptions=n},error:n=>{this.message.error("Erreur lors du chargement des utilisateurs"),console.error(n)}}),this.typesRecompensesService.getAllTypesRecompenses().pipe(b(this.destroy$)).subscribe({next:n=>{this.typesRecompenses=n},error:n=>{this.message.error("Erreur lors du chargement des types de r\xE9compenses"),console.error(n)}})}nextStep(){this.isCurrentStepValid()&&this.currentStep<3&&this.currentStep++}previousStep(){this.currentStep>0&&this.currentStep--}isCurrentStepValid(){switch(this.currentStep){case 0:return this.addRewardForm.get("selectedUtilisateur")?.valid||!1;case 1:return this.addRewardForm.get("id_souscription")?.valid||!1;case 2:return this.addRewardForm.get("id_type_recompense")?.valid||!1;case 3:return["description","motif_recompense","periode_merite","statut_recompense","date_attribution"].every(e=>this.addRewardForm.get(e)?.valid);default:return!1}}onUtilisateurChange(n){this.selectedUtilisateur=this.utilisateursSouscriptions.find(e=>e.id_utilisateur===n)||null,this.availableSouscriptions=this.selectedUtilisateur?this.selectedUtilisateur.souscriptions:[],this.selectedSouscription=null,this.addRewardForm.patchValue({id_souscription:""})}onSouscriptionChange(n){this.selectedSouscription=this.availableSouscriptions.find(e=>e.id_souscription===n)||null}onTypeRecompenseChange(n){this.selectedTypeRecompense=this.typesRecompenses.find(e=>e.id_type_recompense===n)||null}getUtilisateurDisplay(n){return`${n.prenom} ${n.nom} (${n.email})`}getSouscriptionDisplay(n){return`#${n.id_souscription} - ${n.nombre_terrains} terrain(s) - ${this.formatCurrency(n.montant_mensuel)}/mois`}submitAddReward(){if(!this.addRewardForm.valid){this.message.error("Veuillez remplir tous les champs requis");return}this.isSubmittingReward=!0;let n=this.addRewardForm.value,e={id_souscription:n.id_souscription,id_type_recompense:n.id_type_recompense,description:n.description,motif_recompense:n.motif_recompense,periode_merite:n.periode_merite,statut_recompense:n.statut_recompense,date_attribution:this.formatDateForApi(n.date_attribution),date_attribution_effective:n.date_attribution_effective?this.formatDateForApi(n.date_attribution_effective):null,commentaire_admin:n.commentaire_admin||null};this.recompensesService.createRecompense(e).pipe(b(this.destroy$)).subscribe({next:()=>{this.message.success("R\xE9compense cr\xE9\xE9e avec succ\xE8s"),this.closeAddRewardModal(),this.loadRecompenses()},error:s=>{this.message.error("Erreur lors de la cr\xE9ation de la r\xE9compense"),console.error("Erreur cr\xE9ation r\xE9compense:",s)},complete:()=>{this.isSubmittingReward=!1}})}formatDateForApi(n){return n?(typeof n=="string"?new Date(n):n).toISOString().split("T")[0]:""}static \u0275fac=function(e){return new(e||o)(P(dt),P(W),P(q),P(ge),P(We))};static \u0275cmp=G({type:o,selectors:[["app-rewards-admin"]],standalone:!0,features:[Y],decls:83,vars:44,consts:[["suffixIconSearch",""],["basicTable",""],["totalTemplate",""],["noComment",""],[1,"header-section"],[1,"header-title"],[1,"stats-grid"],[1,"stat-card"],[3,"nzValue","nzTitle","nzValueStyle"],[1,"filters-section"],[1,"filters-row"],[1,"filter-item"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Rechercher description, motif...",3,"ngModelChange","input","ngModel"],["nzPlaceHolder","Tous les statuts","nzAllowClear","",3,"ngModelChange","ngModel"],["nzValue","due","nzLabel","Due"],["nzValue","attribuee","nzLabel","Attribu\xE9e"],["nzValue","annulee","nzLabel","Annul\xE9e"],["nzPlaceHolder","Tous les types","nzAllowClear","",3,"ngModelChange","ngModel"],["nzLabel","Bonus Performance",3,"nzValue"],["nzLabel","Bonus R\xE9gularit\xE9",3,"nzValue"],["nzLabel","Prime Fid\xE9lit\xE9",3,"nzValue"],[1,"filter-actions"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","clear"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","reload"],["nz-icon","","nzType","plus"],[1,"table-section"],[3,"nzSpinning"],[3,"nzData","nzFrontPagination","nzScroll"],["nzWidth","80px"],["nzWidth","200px"],["nzWidth","150px"],["nzWidth","250px"],["nzWidth","120px"],["nzWidth","100px"],["nzWidth","250px","nzAlign","center"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[3,"nzPageIndexChange","nzPageSizeChange","nzTotal","nzPageSize","nzPageIndex","nzShowSizeChanger","nzShowQuickJumper","nzShowTotal","nzPageSizeOptions"],["class","error-message",4,"ngIf"],["nzTitle","Modifier le statut de la r\xE9compense",3,"nzVisibleChange","nzOnCancel","nzVisible","nzWidth","nzFooter"],[4,"nzModalContent"],["nzTitle","Ajouter une nouvelle r\xE9compense",3,"nzVisibleChange","nzOnCancel","nzVisible","nzWidth","nzFooter"],["nz-icon","","nzType","search"],[1,"user-info"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-subscription"],["class","user-matricule",4,"ngIf"],[1,"type-info"],[1,"type-name"],[1,"type-description"],[1,"recompense-content"],[1,"recompense-description"],[1,"recompense-motif"],[1,"periode-info"],[1,"date-info"],["class","effective-date",4,"ngIf"],[3,"nzColor"],["class","admin-comment",4,"ngIf","ngIfElse"],["nzAlign","center"],[1,"actions-container"],["class","status-actions",4,"ngIf"],[1,"user-matricule"],[1,"effective-date"],[1,"admin-comment"],[1,"comment-text"],[1,"no-comment"],[1,"status-actions"],["nz-button","","nzType","primary","nzSize","small","nzTooltip","Marquer comme attribu\xE9e",3,"click"],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzSize","small","nzTooltip","Annuler la r\xE9compense",3,"click"],["nz-icon","","nzType","close"],["nz-button","","nzType","default","nzSize","small","nzTooltip","Modifier le statut",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","default","nzSize","small","nzTooltip","Marquer comme due",3,"click"],["nz-icon","","nzType","undo"],[1,"error-message"],["nzType","error","nzShowIcon","","nzCloseable","",3,"nzMessage"],["class","recompense-details",4,"ngIf"],["nz-form","",3,"ngSubmit","formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["formControlName","statut_recompense","nzPlaceHolder","S\xE9lectionner un statut"],["nz-row","",1,"modal-actions",3,"nzGutter"],["nz-col","","nzSpan","24",2,"text-align","right"],["nz-button","","nzType","default",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],[1,"recompense-details"],[1,"user-section"],[1,"detail-row"],["class","detail-row",4,"ngIf"],[3,"nzDashed"],[1,"recompense-section"],[1,"description-text"],[1,"motif-text"],["nzSize","small",2,"margin-bottom","24px",3,"nzCurrent"],["nzTitle","Utilisateur"],["nzTitle","Souscription"],["nzTitle","Type de r\xE9compense"],["nzTitle","Informations"],["nz-form","",3,"formGroup"],[4,"ngIf"],[1,"modal-steps-actions"],["nz-button","","nzType","default",3,"click","disabled"],["nz-icon","","nzType","left"],["nz-button","","nzType","primary",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click",4,"ngIf"],["nzRequired",""],["formControlName","selectedUtilisateur","nzPlaceHolder","S\xE9lectionner un utilisateur","nzShowSearch","",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["class","error-text",4,"ngIf"],["class","user-info-card",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"error-text"],[1,"user-info-card"],[1,"info-grid"],[1,"info-item"],["formControlName","id_souscription","nzPlaceHolder","S\xE9lectionner une souscription",3,"ngModelChange"],["class","subscription-info-card",4,"ngIf"],[1,"subscription-info-card"],["formControlName","id_type_recompense","nzPlaceHolder","S\xE9lectionner un type de r\xE9compense",3,"ngModelChange"],["class","reward-type-info-card",4,"ngIf"],[1,"reward-type-info-card"],["class","info-item",4,"ngIf"],["nz-col","","nzSpan","12"],["nz-input","","formControlName","description","rows","3","placeholder","Description de la r\xE9compense"],["nz-input","","formControlName","motif_recompense","rows","3","placeholder","Motif de l'attribution"],["nz-col","","nzSpan","8"],["nz-input","","formControlName","periode_merite","placeholder","Ex: Janvier - Juin 2025"],["formControlName","date_attribution","nzPlaceHolder","S\xE9lectionner une date",2,"width","100%"],["formControlName","date_attribution_effective","nzPlaceHolder","Optionnel",2,"width","100%"],["nz-input","","formControlName","commentaire_admin","rows","2","placeholder","Commentaire optionnel"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-icon","","nzType","right"],["nz-button","","nzType","primary",3,"click","nzLoading","disabled"],["nz-icon","","nzType","save"]],template:function(e,s){if(e&1){let l=z();i(0,"div",4)(1,"div",5)(2,"h2"),r(3,"Gestion des R\xE9compenses"),t(),i(4,"p"),r(5,"Interface d'administration pour g\xE9rer les r\xE9compenses des utilisateurs"),t()(),i(6,"div",6)(7,"nz-card",7),_(8,"nz-statistic",8),t(),i(9,"nz-card",7),_(10,"nz-statistic",8),t(),i(11,"nz-card",7),_(12,"nz-statistic",8),t(),i(13,"nz-card",7),_(14,"nz-statistic",8),t()()(),i(15,"div",9)(16,"div",10)(17,"div",11)(18,"label"),r(19,"Recherche"),t(),i(20,"nz-input-group",12)(21,"input",13),A("ngModelChange",function(f){return c(l),O(s.searchTerm,f)||(s.searchTerm=f),u(f)}),x("input",function(){return c(l),u(s.onSearchChange())}),t()(),g(22,bt,1,0,"ng-template",null,0,U),t(),i(24,"div",11)(25,"label"),r(26,"Statut"),t(),i(27,"nz-select",14),A("ngModelChange",function(f){return c(l),O(s.statusFilter,f)||(s.statusFilter=f),u(f)}),x("ngModelChange",function(){return c(l),u(s.onStatusFilterChange())}),_(28,"nz-option",15)(29,"nz-option",16)(30,"nz-option",17),t()(),i(31,"div",11)(32,"label"),r(33,"Type de r\xE9compense"),t(),i(34,"nz-select",18),A("ngModelChange",function(f){return c(l),O(s.typeFilter,f)||(s.typeFilter=f),u(f)}),x("ngModelChange",function(){return c(l),u(s.onTypeFilterChange())}),_(35,"nz-option",19)(36,"nz-option",20)(37,"nz-option",21),t()(),i(38,"div",22)(39,"button",23),x("click",function(){return c(l),u(s.resetFilters())}),_(40,"span",24),r(41," R\xE9initialiser "),t(),i(42,"button",25),x("click",function(){return c(l),u(s.refresh())}),_(43,"span",26),r(44," Actualiser "),t(),i(45,"button",25),x("click",function(){return c(l),u(s.openAddRewardModal())}),_(46,"span",27),r(47," Ajouter une r\xE9compense "),t()()()(),i(48,"div",28)(49,"nz-spin",29)(50,"nz-table",30,1)(52,"thead")(53,"tr")(54,"th",31),r(55,"ID"),t(),i(56,"th",32),r(57,"Utilisateur"),t(),i(58,"th",33),r(59,"Type"),t(),i(60,"th",34),r(61,"Description & Motif"),t(),i(62,"th",35),r(63,"P\xE9riode"),t(),i(64,"th",35),r(65,"Date attribution"),t(),i(66,"th",36),r(67,"Statut"),t(),i(68,"th",32),r(69,"Commentaire admin"),t(),i(70,"th",37),r(71,"Actions"),t()()(),i(72,"tbody"),g(73,Tt,48,29,"tr",38),t()()(),i(74,"div",39)(75,"nz-pagination",40),x("nzPageIndexChange",function(f){return c(l),u(s.onPageChange(f))})("nzPageSizeChange",function(f){return c(l),u(s.onPageSizeChange(f))}),t(),g(76,Ot,1,3,"ng-template",null,2,U),t(),g(78,At,2,1,"div",41),i(79,"nz-modal",42),A("nzVisibleChange",function(f){return c(l),O(s.isStatusModalVisible,f)||(s.isStatusModalVisible=f),u(f)}),x("nzOnCancel",function(){return c(l),u(s.closeStatusModal())}),g(80,Ft,20,7,"div",43),t(),i(81,"nz-modal",44),A("nzVisibleChange",function(f){return c(l),O(s.isAddRewardModalVisible,f)||(s.isAddRewardModalVisible=f),u(f)}),x("nzOnCancel",function(){return c(l),u(s.closeAddRewardModal())}),g(82,rn,19,9,"div",43),t()()}if(e&2){let l=I(23),m=I(51),f=I(77);a(8),p("nzValue",s.totalRecompenses)("nzTitle","Total des r\xE9compenses")("nzValueStyle",w(38,gt)),a(2),p("nzValue",s.getRecompensesDues())("nzTitle","Dues")("nzValueStyle",w(39,xt)),a(2),p("nzValue",s.getRecompensesAttribuees())("nzTitle","Attribu\xE9es")("nzValueStyle",w(40,vt)),a(2),p("nzValue",s.getRecompensesAnnulees())("nzTitle","Annul\xE9es")("nzValueStyle",w(41,zt)),a(6),p("nzSuffix",l),a(),T("ngModel",s.searchTerm),a(6),T("ngModel",s.statusFilter),a(7),T("ngModel",s.typeFilter),a(),p("nzValue",1),a(),p("nzValue",2),a(),p("nzValue",3),a(12),p("nzSpinning",s.isLoading),a(),p("nzData",s.recompenses)("nzFrontPagination",!1)("nzScroll",w(42,ht)),a(23),p("ngForOf",m.data),a(2),p("nzTotal",s.totalRecompenses)("nzPageSize",s.perPage)("nzPageIndex",s.currentPage)("nzShowSizeChanger",!0)("nzShowQuickJumper",!0)("nzShowTotal",f)("nzPageSizeOptions",w(43,St)),a(3),p("ngIf",s.error&&!s.isLoading),a(),T("nzVisible",s.isStatusModalVisible),p("nzWidth",600)("nzFooter",null),a(2),T("nzVisible",s.isAddRewardModalVisible),p("nzWidth",700)("nzFooter",null)}},dependencies:[K,J,Q,X,xe,ue,pe,de,me,ce,ve,_e,fe,Ve,Oe,Re,Me,Ie,Te,Ae,Pe,oe,re,ne,ie,ee,Z,je,ke,Ue,De,be,he,Se,Ne,Fe,Ke,Xe,et,Ze,Ee,we,nt,tt,ze,le,se,ae,ye,Ce,Qe,Be,qe,He,Ge,Je,Ye,at,ot,it,te,pt,lt,st,rt,Le,$e],styles:[".header-section[_ngcontent-%COMP%]{margin-bottom:24px}.header-title[_ngcontent-%COMP%]{margin-bottom:20px}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:28px;font-weight:600}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #f0f0f0;box-shadow:0 2px 4px #00000005;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}.filters-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #f0f0f0;border-radius:8px;padding:20px;margin-bottom:24px;box-shadow:0 1px 2px #00000005}.filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:16px;align-items:end}@media (max-width: 1200px){.filters-row[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr 1fr;gap:12px}}@media (max-width: 768px){.filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.filter-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.table-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;border:1px solid #f0f0f0;box-shadow:0 1px 2px #00000005;overflow:hidden}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background:#fafafa;color:#374151;font-weight:600;font-size:13px;border-bottom:1px solid #f0f0f0;padding:12px 8px}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #f9f9f9;vertical-align:top}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%]{background:#fafafa}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-name[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.user-email[_ngcontent-%COMP%]{font-size:12px;color:#1890ff}.user-subscription[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.user-matricule[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;font-family:monospace;background:#f3f4f6;padding:2px 4px;border-radius:2px;display:inline-block;margin-top:2px}.type-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.type-name[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px}.type-description[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4}.recompense-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.recompense-description[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:13px;line-height:1.4}.recompense-motif[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4;font-style:italic}.periode-info[_ngcontent-%COMP%]{font-size:13px;color:#374151;font-weight:500}.valeur-info[_ngcontent-%COMP%]{font-size:14px;color:#059669;font-weight:600}.date-info[_ngcontent-%COMP%]{font-size:13px;color:#6b7280}.effective-date[_ngcontent-%COMP%]{font-size:11px;color:#059669;font-style:italic;margin-top:2px}.admin-comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.comment-text[_ngcontent-%COMP%]{font-size:13px;color:#374151;line-height:1.4}.no-comment[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;font-style:italic}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;min-width:220px}.status-actions[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap;justify-content:center}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:12px!important;height:28px!important;padding:0 8px!important;border-radius:4px!important;display:flex!important;align-items:center!important;gap:4px!important;min-width:70px!important;justify-content:center!important}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:11px!important}[_nghost-%COMP%]     .status-actions .ant-btn-primary{background:linear-gradient(135deg,#1890ff,#096dd9)!important;border:none!important;box-shadow:0 2px 4px #1890ff4d!important}[_ngcontent-%COMP%]:is():hover{background:linear-gradient(135deg,#40a9ff,#1890ff)!important;transform:translateY(-1px)!important;box-shadow:0 4px 8px #1890ff66!important}[_nghost-%COMP%]     .status-actions .ant-btn-default{background:#fff!important;border:1px solid #d9d9d9!important;color:#595959!important}[_ngcontent-%COMP%]:is():hover{border-color:#40a9ff!important;color:#1890ff!important;transform:translateY(-1px)!important;box-shadow:0 2px 6px #0000001a!important}[_ngcontent-%COMP%]:is().ant-btn-dangerous{border-color:#ff7875!important;color:#ff4d4f!important}[_ngcontent-%COMP%]:is().ant-btn-dangerous:hover{background:#fff2f0!important;border-color:#ff4d4f!important;color:#cf1322!important}.pagination-container[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center;background:#fafafa}.error-message[_ngcontent-%COMP%]{padding:16px 20px}.empty-state[_ngcontent-%COMP%]{padding:40px;text-align:center}.recompense-details[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:6px;margin-bottom:16px}.recompense-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#374151;font-size:16px;font-weight:600}.detail-row[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;align-items:flex-start;gap:8px}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:100px;color:#6b7280;font-size:14px}.description-text[_ngcontent-%COMP%], .motif-text[_ngcontent-%COMP%]{background:#fff;padding:8px;border-radius:4px;border:1px solid #e5e7eb;margin-top:4px;font-size:14px;line-height:1.5;color:#374151}.user-section[_ngcontent-%COMP%], .recompense-section[_ngcontent-%COMP%]{margin-bottom:16px}.user-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .recompense-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;font-size:14px;font-weight:600;border-bottom:1px solid #e5e7eb;padding-bottom:4px}.modal-actions[_ngcontent-%COMP%]{margin-top:20px;border-top:1px solid #f0f0f0;padding-top:16px}.error-text[_ngcontent-%COMP%]{color:#ff4d4f;font-size:12px;margin-top:4px}@media (max-width: 768px){.actions-container[_ngcontent-%COMP%]{min-width:180px;gap:4px}.status-actions[_ngcontent-%COMP%]{gap:2px}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:11px!important;height:24px!important;padding:0 6px!important;min-width:60px!important}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:10px!important}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}}@media (max-width: 480px){.actions-container[_ngcontent-%COMP%]{min-width:150px}[_nghost-%COMP%]     .status-actions .ant-btn{font-size:10px!important;height:22px!important;padding:0 4px!important;min-width:50px!important}[_ngcontent-%COMP%]:is()   span[_ngcontent-%COMP%]:not(.anticon){display:none}[_ngcontent-%COMP%]:is()   .anticon[_ngcontent-%COMP%]{font-size:9px!important;margin:0!important}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:12px}}.user-info-card[_ngcontent-%COMP%], .subscription-info-card[_ngcontent-%COMP%], .reward-type-info-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:6px;margin-top:16px;border:1px solid #e5e7eb}.user-info-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .subscription-info-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .reward-type-info-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:#374151;font-size:14px;font-weight:600;border-bottom:1px solid #e5e7eb;padding-bottom:4px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;font-size:13px}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:80px;color:#6b7280;font-weight:500}.modal-steps-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:24px;padding-top:16px;border-top:1px solid #f0f0f0}.modal-steps-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}[_nghost-%COMP%]     .ant-steps-item-title{font-size:14px!important;font-weight:500!important}[_nghost-%COMP%]     .ant-steps-item-description{font-size:12px!important}@media (max-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-steps-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.modal-steps-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};export{ct as RewardsAdminComponent};
