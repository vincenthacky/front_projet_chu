import{a as Ne,b as Ue,c as Ve}from"./chunk-OGA5CNRD.js";import{b as ne,c as ie,d as oe}from"./chunk-2CDAYGND.js";import{a as Le}from"./chunk-B45Q3UJ5.js";import{d as Be}from"./chunk-YGIHEPSV.js";import{e as Re}from"./chunk-CGU7QHHX.js";import{e as je}from"./chunk-7SAAJH44.js";import{a as he,b as be,c as Ce}from"./chunk-YDUBSDBD.js";import{a as We}from"./chunk-YRYIRO4T.js";import{a as X,b as J}from"./chunk-4KCKLZTT.js";import{a as ye,b as Pe,c as Se,d as ve,h as Oe,i as we,j as ze,l as Ee,m as Te,n as Ie,o as Ae,p as Fe}from"./chunk-ZFV5NHAD.js";import"./chunk-VWKRELSZ.js";import"./chunk-E44DIQ7Z.js";import"./chunk-OSEQ4WIA.js";import{a as ke,b as De}from"./chunk-5HO2BJJL.js";import{c as H,e as Y,f as Q}from"./chunk-6XHWMXPL.js";import"./chunk-WVDIGHRG.js";import{c as Me}from"./chunk-V73OBEQV.js";import"./chunk-WGMYJEJ4.js";import"./chunk-465NLBOU.js";import{a as K,b as Z,d as ee,f as te}from"./chunk-IXUSDIY2.js";import"./chunk-CZTCGH7Y.js";import{A as xe,d as ae,g as re,h as se,k as le,m as ce,n as me,o as pe,s as de,t as ue,u as ge,v as fe,w as _e}from"./chunk-XBYNCXSQ.js";import"./chunk-DST4DQF7.js";import"./chunk-PYGBBRX5.js";import"./chunk-PJQGREK5.js";import"./chunk-4FK3KGSF.js";import"./chunk-PA5JYGXZ.js";import{d as G}from"./chunk-HPXRSP2X.js";import"./chunk-YLHBJJO7.js";import{A as $,s as j,t as q}from"./chunk-H734YLDB.js";import{Aa as S,Ab as M,Ac as W,Mb as n,Nb as i,Ob as p,Pb as N,Qb as U,Sb as T,Yb as h,_b as d,fb as s,gb as z,gc as V,hc as r,ic as g,jc as _,mc as b,nc as C,oa as B,oc as y,qc as L,vb as f,za as P,zb as m}from"./chunk-EIVDWLNO.js";import{a as k,b as R,d as D}from"./chunk-4CLCTAJ7.js";function $e(l,t){if(l&1&&(n(0,"div",49)(1,"div",50),p(2,"nz-avatar",51),n(3,"div",52)(4,"div",53),r(5),i(),n(6,"div",54),r(7),i()()(),n(8,"div",55)(9,"div",56)(10,"span",57),r(11),i(),n(12,"span",58),r(13,"SOUSCRIPTIONS"),i()(),n(14,"div",56)(15,"span",57),r(16),i(),n(17,"span",58),r(18,"TOTAL"),i()(),n(19,"div",56)(20,"span",57),r(21),i(),n(22,"span",58),r(23,"EN RETARD"),i()()(),p(24,"i",59),i()),l&2){let e=d().$implicit,o=d();s(2),m("nzText",e.initials),s(3),g(e.fullName),s(2),g(e.email),s(4),g(e.souscriptions.length),s(5),g(o.formatCurrency(e.totalAmount)),s(5),g(e.totalInDelay)}}function Ge(l,t){l&1&&p(0,"i",88)}function He(l,t){if(l&1&&(n(0,"button",89),p(1,"div",90)(2,"div",90)(3,"div",90),i()),l&2){d();let e=V(40);m("nzDropdownMenu",e)}}function Ye(l,t){if(l&1){let e=T();n(0,"tr",60)(1,"td",61)(2,"span",62),r(3),i()(),n(4,"td",61)(5,"div",63)(6,"div",64),p(7,"i",65),i(),n(8,"div",66)(9,"div",67),r(10),i(),n(11,"div",68),r(12),i()()()(),n(13,"td",61)(14,"div",69)(15,"div",70),r(16),i(),n(17,"div",71),p(18,"div",72),i()()(),n(19,"td",61)(20,"span",73),r(21),i()(),n(22,"td",61)(23,"span",74),r(24),i()(),n(25,"td",61)(26,"span",75),r(27),i()(),n(28,"td",61)(29,"span",76),r(30),i()(),n(31,"td",61)(32,"nz-tag",77),f(33,Ge,1,0,"i",78),n(34,"span",79),r(35),i()()(),n(36,"td",80)(37,"nz-space",81),f(38,He,4,1,"button",82),i(),n(39,"nz-dropdown-menu",null,2)(41,"ul",83)(42,"li",84),h("click",function(){let a=P(e).$implicit,c=d(2);return S(c.viewDetails(a.id_souscription))}),p(43,"span",85),r(44," D\xE9tails paiements "),i(),n(45,"li",84),h("click",function(){let a=P(e).$implicit,c=d(2);return S(c.makePayment(a.id_souscription))}),p(46,"span",86),r(47," Effectuer un paiement "),i(),p(48,"li",87),i()()()()}if(l&2){let e=t.$implicit,o=d(2);s(3),g(e.id_souscription),s(7),g(e.terrain.libelle),s(2),_("",e.terrain.superficie,"m\xB2"),s(4),g(o.formatCurrency(e.prix_total_terrain)),s(2),M("width",o.getCompletionPercentage(e),"%"),s(3),g(o.formatCurrency(e.montant_paye)),s(3),g(o.formatCurrency(e.reste_a_payer)),s(3),g(o.formatDate(e.date_debut_paiement)),s(3),_(" ",e.statut_souscription==="terminee"?"--/--/--":o.formatDate(e.date_prochain)," "),s(2),m("nzColor",o.getStatusDisplay(e).color),s(),m("ngIf",e.statut_souscription==="en_cours"),s(2),g(o.getStatusDisplay(e).label)}}function Qe(l,t){if(l&1&&(n(0,"nz-collapse-panel",35),f(1,$e,25,6,"ng-template",null,0,W),n(3,"div",36)(4,"nz-table",37,1)(6,"thead")(7,"tr",38)(8,"th",39),r(9,"Souscriptions"),i(),n(10,"th",40),r(11,"T\xE9rrains"),i(),n(12,"th",41),r(13,"Prix total"),i(),n(14,"th",42),r(15,"Montant pay\xE9"),i(),n(16,"th",43),r(17,"Reste \xE0 payer"),i(),n(18,"th",44),r(19,"Date D\xE9but paiement"),i(),n(20,"th",45),r(21,"Prochain paiements"),i(),n(22,"th",46),r(23,"Status"),i(),n(24,"th",47),r(25,"Actions"),i()()(),n(26,"tbody"),f(27,Ye,49,13,"tr",48),i()()()()),l&2){let e=t.$implicit,o=V(2);m("nzShowArrow",!1)("nzHeader",o),s(4),m("nzData",e.souscriptions)("nzPageSize",10)("nzShowPagination",!1)("nzBordered",!1),s(23),m("ngForOf",e.souscriptions)}}function Xe(l,t){if(l&1&&(n(0,"div",105)(1,"div",106)(2,"div",107),p(3,"i",6),r(4),i(),n(5,"nz-tag",108),r(6),i()(),n(7,"div",109)(8,"div",110)(9,"span",111),r(10,"Terrain:"),i(),n(11,"span",112),r(12),i()(),n(13,"div",110)(14,"span",111),r(15,"Surface:"),i(),n(16,"span",112),r(17),i()(),n(18,"div",110)(19,"span",111),r(20,"Progression:"),i(),n(21,"span",112),r(22),i()()(),n(23,"div",113)(24,"div",114)(25,"span",115),r(26,"Pay\xE9:"),i(),n(27,"span",116),r(28),i()(),n(29,"div",114)(30,"span",115),r(31,"Reste:"),i(),n(32,"span",117),r(33),i()()()()),l&2){let e=d(2);s(4),_(" ",e.selectedSubscriptionId," "),s(),m("nzColor",e.getStatusColor(e.selectedSubscriptionInfo.statut)),s(),_(" ",e.getStatusLabel(e.selectedSubscriptionInfo.statut)," "),s(6),g(e.selectedSubscriptionInfo.terrain),s(5),_("",e.selectedSubscriptionInfo.surface," m\xB2"),s(5),_("",e.selectedSubscriptionInfo.progression.toFixed(2),"%"),s(6),g(e.formatAmount(e.selectedSubscriptionInfo.montantPaye)),s(5),g(e.formatAmount(e.selectedSubscriptionInfo.resteAPayer))}}function Je(l,t){if(l&1&&(n(0,"div",118),r(1),i()),l&2){let e=d(2);s(),_(" ",e.lastFivePayments.length," ")}}function Ke(l,t){if(l&1&&(n(0,"span",130),r(1),i()),l&2){let e=d(2).$implicit;s(),_(" Mensualit\xE9 #",e.numero_mensualite," ")}}function Ze(l,t){if(l&1&&(n(0,"span",130),r(1),i()),l&2){let e=d(2).$implicit,o=d(3);s(),_(" ",o.formatPaymentMode(e.mode_paiement)," ")}}function et(l,t){if(l&1&&(n(0,"nz-tag",131),r(1),i()),l&2){let e=d(2).$implicit,o=d(3);m("nzColor",o.getPaymentStatusColor(e.statut_versement)),s(),_(" ",o.formatPaymentStatus(e.statut_versement)," ")}}function tt(l,t){if(l&1&&(n(0,"div",127),f(1,Ke,2,1,"span",128)(2,Ze,2,1,"span",128)(3,et,2,2,"nz-tag",129),i()),l&2){let e=d().$implicit;s(),m("ngIf",e.numero_mensualite),s(),m("ngIf",e.mode_paiement),s(),m("ngIf",e.statut_versement)}}function nt(l,t){if(l&1&&(n(0,"div",121)(1,"div",122)(2,"div",123),p(3,"i",124),r(4),i(),n(5,"div",125),r(6),i()(),f(7,tt,4,3,"div",126),i()),l&2){let e=t.$implicit,o=d(3);s(4),_(" ",e.date," "),s(2),_(" ",o.formatAmount(e.amount)," "),s(),m("ngIf",e.numero_mensualite||e.mode_paiement)}}function it(l,t){if(l&1&&(n(0,"div",119),f(1,nt,8,3,"div",120),i()),l&2){let e=d(2);s(),m("ngForOf",e.lastFivePayments)("ngForTrackBy",e.trackByPayment)}}function ot(l,t){l&1&&(n(0,"div",132),p(1,"i",133),n(2,"span"),r(3,"Aucun paiement effectu\xE9"),i()())}function at(l,t){if(l&1){let e=T();N(0),n(1,"div",91),f(2,Xe,34,8,"div",92),n(3,"div",93)(4,"div",94)(5,"div",95),p(6,"i",96),r(7," Derniers paiements "),i(),f(8,Je,2,1,"div",97),i(),f(9,it,2,2,"div",98)(10,ot,4,0,"div",99),i(),n(11,"div",100)(12,"button",101),h("click",function(){P(e);let a=d();return S(a.handleCancel())}),p(13,"i",102),r(14," Fermer "),i(),n(15,"button",103),h("click",function(){P(e);let a=d();return S(a.handleOk())}),p(16,"i",104),r(17," D\xE9tails "),i()()(),U()}if(l&2){let e=d();s(2),m("ngIf",e.selectedSubscriptionInfo),s(6),m("ngIf",e.lastFivePayments.length>0),s(),m("ngIf",e.lastFivePayments.length>0),s(),m("ngIf",e.lastFivePayments.length===0)}}function rt(l,t){l&1&&(n(0,"span"),r(1,"Ch\xE8que"),i())}function st(l,t){l&1&&(n(0,"span"),r(1,"Esp\xE8ces"),i())}function lt(l,t){l&1&&(n(0,"span"),r(1,"Virement bancaire"),i())}function ct(l,t){l&1&&(n(0,"span"),r(1,"Carte bancaire"),i())}function mt(l,t){l&1&&(n(0,"span"),r(1,"Paiement mobile"),i())}function pt(l,t){l&1&&(n(0,"span"),r(1,"Mandat"),i())}function dt(l,t){l&1&&(n(0,"span",182),r(1,"Non s\xE9lectionn\xE9"),i())}function ut(l,t){if(l&1&&(n(0,"div",171)(1,"span",172),r(2,"R\xE9f\xE9rence :"),i(),n(3,"span",173),r(4),i()()),l&2){let e=d(3);s(4),g(e.paymentForm.reference_paiement)}}function gt(l,t){if(l&1&&(n(0,"div",183)(1,"strong"),r(2,"Commentaire :"),i(),r(3),i()),l&2){let e=d(3);s(3),_(" ",e.paymentForm.commentaire_paiement," ")}}function ft(l,t){l&1&&(n(0,"div",184)(1,"div",185),p(2,"span",186),n(3,"span",187),r(4,"Formulaire compl\xE9t\xE9 - Pr\xEAt pour le paiement"),i()()())}function _t(l,t){if(l&1){let e=T();n(0,"div",135)(1,"div",136)(2,"h4",137),p(3,"span",138),r(4," Informations de la souscription "),i(),n(5,"div",139)(6,"div",140)(7,"span",141),r(8,"Terrain :"),i(),n(9,"span",142),r(10),i()(),n(11,"div",140)(12,"span",141),r(13,"Montant total :"),i(),n(14,"span",142),r(15),i()(),n(16,"div",140)(17,"span",141),r(18,"Montant pay\xE9 :"),i(),n(19,"span",143),r(20),i()(),n(21,"div",140)(22,"span",141),r(23,"Reste \xE0 payer :"),i(),n(24,"span",144),r(25),i()()()(),n(26,"form",145)(27,"div",146)(28,"label",147),p(29,"span",148),r(30," Mode de paiement "),n(31,"span",149),r(32,"*"),i()(),n(33,"select",150),y("ngModelChange",function(a){P(e);let c=d(2);return C(c.paymentForm.mode_paiement,a)||(c.paymentForm.mode_paiement=a),S(a)}),n(34,"option",18),r(35,"S\xE9lectionner un mode de paiement"),i(),n(36,"option",151),r(37,"Ch\xE8que"),i(),n(38,"option",152),r(39,"Esp\xE8ces"),i(),n(40,"option",153),r(41,"Virement bancaire"),i(),n(42,"option",154),r(43,"Carte bancaire"),i(),n(44,"option",155),r(45,"Paiement mobile"),i(),n(46,"option",156),r(47,"Mandat"),i()()(),n(48,"div",146)(49,"label",147),p(50,"span",157),r(51," Montant du paiement (FCFA) "),n(52,"span",149),r(53,"*"),i()(),n(54,"input",158),y("ngModelChange",function(a){P(e);let c=d(2);return C(c.paymentForm.montant_paye,a)||(c.paymentForm.montant_paye=a),S(a)}),i(),n(55,"small",159),p(56,"span",160),r(57),i()(),n(58,"div",146)(59,"label",147),p(60,"span",161),r(61," R\xE9f\xE9rence du paiement "),i(),n(62,"input",162),y("ngModelChange",function(a){P(e);let c=d(2);return C(c.paymentForm.reference_paiement,a)||(c.paymentForm.reference_paiement=a),S(a)}),i(),n(63,"small",159),p(64,"span",160),r(65," Optionnel - Num\xE9ro de ch\xE8que, r\xE9f\xE9rence de virement, etc. "),i()(),n(66,"div",146)(67,"label",147),p(68,"span",163),r(69," Date de paiement effectif "),n(70,"span",149),r(71,"*"),i()(),n(72,"input",164),y("ngModelChange",function(a){P(e);let c=d(2);return C(c.paymentForm.date_paiement_effectif,a)||(c.paymentForm.date_paiement_effectif=a),S(a)}),i()(),n(73,"div",146)(74,"label",147),p(75,"span",165),r(76," Commentaire "),i(),n(77,"textarea",166),y("ngModelChange",function(a){P(e);let c=d(2);return C(c.paymentForm.commentaire_paiement,a)||(c.paymentForm.commentaire_paiement=a),S(a)}),i(),n(78,"small",159),p(79,"span",160),r(80," Optionnel - Pour des notes internes ou suppl\xE9mentaires. "),i()(),n(81,"div",167)(82,"h5",168),p(83,"span",169),r(84," R\xE9capitulatif du paiement "),i(),n(85,"div",170)(86,"div",171)(87,"span",172),r(88,"Mode de paiement :"),i(),n(89,"span",173),f(90,rt,2,0,"span",174)(91,st,2,0,"span",174)(92,lt,2,0,"span",174)(93,ct,2,0,"span",174)(94,mt,2,0,"span",174)(95,pt,2,0,"span",174)(96,dt,2,0,"span",175),i()(),n(97,"div",171)(98,"span",172),r(99,"Montant \xE0 payer :"),i(),n(100,"span",176),r(101),i()(),f(102,ut,5,1,"div",177),n(103,"div",178)(104,"span",141),r(105,"Nouveau solde restant :"),i(),n(106,"span",179),r(107),i()(),f(108,gt,4,1,"div",180),i()(),f(109,ft,5,0,"div",181),i()()}if(l&2){let e=d(2);s(10),g(e.getTerrainName(e.selectedSouscriptionForPayment)),s(5),g(e.formatCurrency(e.selectedSouscriptionForPayment.prix_total_terrain)),s(5),g(e.formatCurrency(e.selectedSouscriptionForPayment.montant_paye)),s(5),_(" ",e.formatCurrency(e.getMontantRestant(e.selectedSouscriptionForPayment))," "),s(8),M("border-color",e.paymentForm.mode_paiement?"#10b981":"#d1d5db"),b("ngModel",e.paymentForm.mode_paiement),s(21),M("border-color",e.paymentForm.montant_paye>0?"#10b981":"#d1d5db"),b("ngModel",e.paymentForm.montant_paye),m("max",e.getMontantRestant(e.selectedSouscriptionForPayment)),s(3),_(" Maximum : ",e.formatCurrency(e.getMontantRestant(e.selectedSouscriptionForPayment))," "),s(5),M("border-color",e.paymentForm.reference_paiement?"#10b981":"#d1d5db"),b("ngModel",e.paymentForm.reference_paiement),s(10),M("border-color",e.paymentForm.date_paiement_effectif?"#10b981":"#d1d5db"),b("ngModel",e.paymentForm.date_paiement_effectif),s(5),M("border-color",e.paymentForm.commentaire_paiement?"#10b981":"#d1d5db"),b("ngModel",e.paymentForm.commentaire_paiement),s(13),m("ngIf",e.paymentForm.mode_paiement==="cheque"),s(),m("ngIf",e.paymentForm.mode_paiement==="especes"),s(),m("ngIf",e.paymentForm.mode_paiement==="virement"),s(),m("ngIf",e.paymentForm.mode_paiement==="carte"),s(),m("ngIf",e.paymentForm.mode_paiement==="mobile"),s(),m("ngIf",e.paymentForm.mode_paiement==="mandat"),s(),m("ngIf",!e.paymentForm.mode_paiement),s(5),_(" ",e.paymentForm.montant_paye?e.formatCurrency(e.paymentForm.montant_paye):"0 FCFA"," "),s(),m("ngIf",e.paymentForm.reference_paiement),s(5),_(" ",e.formatCurrency(e.Math.max(0,e.getMontantRestant(e.selectedSouscriptionForPayment)-(e.paymentForm.montant_paye||0)))," "),s(),m("ngIf",e.paymentForm.commentaire_paiement),s(),m("ngIf",e.paymentForm.mode_paiement&&e.paymentForm.montant_paye>0&&e.paymentForm.date_paiement_effectif)}}function xt(l,t){if(l&1&&(N(0),f(1,_t,110,33,"div",134),U()),l&2){let e=d();s(),m("ngIf",e.selectedSouscriptionForPayment)}}var qe=class l{constructor(t,e,o,a){this.souscriptionService=t;this.payementsService=e;this.router=o;this.message=a}souscriptions=[];groupedUsers=[];totalSouscriptions=0;isLoading=!1;error=null;currentPage=1;perPage=10;totalPages=0;filters={page:1,per_page:100};searchTerm="";statusFilter="";surfaceFilter="";dateDebut="";dateFin="";isVisible=!1;selectedSubscriptionId=null;selectedSubscriptionInfo=null;lastFivePayments=[];isPaymentModalVisible=!1;selectedSouscriptionForPayment=null;paymentForm={id_souscription:0,mode_paiement:"",montant_paye:0,date_paiement_effectif:"",reference_paiement:"",commentaire_paiement:""};isProcessingPayment=!1;Math=Math;searchTimeout;ngOnInit(){this.loadSouscriptions(),setTimeout(()=>{this.testWithMockData()},2e3)}ngOnDestroy(){this.searchTimeout&&clearTimeout(this.searchTimeout)}effectuerPaiement(t){return D(this,null,function*(){try{let e=yield this.payementsService.createPaiement(t).toPromise();if(!e)throw new Error("R\xE9ponse de l'API non d\xE9finie");return e}catch(e){throw console.error("Erreur lors de l'appel API:",e),e}})}validatePaymentData(t){let e=[];if((!t.id_souscription||t.id_souscription<=0)&&e.push("ID de souscription invalide"),(!t.mode_paiement||t.mode_paiement.trim()==="")&&e.push("Mode de paiement requis"),(!t.montant_paye||t.montant_paye<=0)&&e.push("Montant de paiement invalide"),!t.date_paiement_effectif)e.push("Date de paiement requise");else{let o=new Date;o.setHours(23,59,59,999),new Date(t.date_paiement_effectif)>o&&e.push("La date de paiement ne peut pas \xEAtre dans le futur")}return{valid:e.length===0,errors:e}}loadSouscriptions(t){console.log("\u{1F504} D\xC9BUT DU CHARGEMENT - V\xE9rification des filtres API"),this.isLoading=!0,this.error=null;let e=R(k(k({},this.filters),t),{all_users:!0,admin_view:!0,per_page:100});console.log("\u{1F4E4} Filtres envoy\xE9s \xE0 l'API:",e),this.souscriptionService.getAllSouscriptions(e).subscribe({next:o=>{if(console.log("\u{1F4E1} R\xE9ponse compl\xE8te de l'API:",o),o.success){this.souscriptions=o.data,console.log("\u{1F50D} ANALYSE DES DONN\xC9ES RE\xC7UES:"),console.log("- Nombre total de souscriptions:",this.souscriptions.length);let a=this.souscriptions.map(x=>x.id_utilisateur),c=[...new Set(a)];console.log("- IDs utilisateurs dans les donn\xE9es:",a),console.log("- IDs utilisateurs uniques:",c),console.log("- Nombre d'utilisateurs uniques:",c.length),c.length===1&&(console.warn("\u26A0\uFE0F ATTENTION: L'API ne retourne que les souscriptions d'un seul utilisateur!"),console.warn("C'est normal si cet utilisateur a toutes les souscriptions dans la BDD")),this.totalSouscriptions=o.pagination.total,this.currentPage=o.pagination.current_page,this.totalPages=o.pagination.last_page,this.groupSouscriptionsByUser()}else console.error("\u274C Erreur API:",o.message),this.error=o.message||"Erreur lors du chargement des souscriptions"},error:o=>{console.error("\u{1F6A8} Erreur lors du chargement:",o),this.error="Impossible de charger les souscriptions. Veuillez r\xE9essayer.",this.souscriptions=[],this.groupedUsers=[]},complete:()=>{this.isLoading=!1,console.log("\u2705 Chargement termin\xE9. Utilisateurs finaux:",this.groupedUsers.length)}})}testWithMockData(){if(console.log("\u{1F9EA} TEST AVEC DONN\xC9ES SIMUL\xC9ES"),this.souscriptions.length===0){console.log("Aucune souscription existante, impossible de cr\xE9er des donn\xE9es de test");return}let t=this.souscriptions.map(o=>o.id_utilisateur),e=[...new Set(t)];console.log("- Nouveaux IDs utilisateurs uniques:",e),this.groupSouscriptionsByUser()}debugAPICall(){console.log("\u{1F527} D\xC9BOGAGE AVANC\xC9 DE L'API"),[{},{per_page:100},{all_users:!0},{admin_view:!0,per_page:100}].forEach((e,o)=>{console.log(`\u{1F9EA} Test ${o+1} avec param\xE8tres:`,e),this.souscriptionService.getAllSouscriptions(e).subscribe({next:a=>{let c=a.data.map(u=>u.id_utilisateur),x=[...new Set(c)];console.log(`\u2705 Test ${o+1} - Utilisateurs uniques trouv\xE9s:`,x),console.log(`\u{1F4CA} Test ${o+1} - Nombre de souscriptions:`,a.data.length)},error:a=>{console.error(`\u274C Test ${o+1} - Erreur:`,a)}})})}groupSouscriptionsByUser(){console.log("\u{1F525} D\xC9BUT DU GROUPEMENT - Diagnostic complet"),console.log("\u{1F4CA} Nombre de souscriptions re\xE7ues:",this.souscriptions.length),console.log("\u{1F4CB} ANALYSE DES SOUSCRIPTIONS:"),this.souscriptions.forEach((a,c)=>{console.log(`Souscription ${c+1}:`,{id_souscription:a.id_souscription,id_utilisateur:a.id_utilisateur,id_admin:a.id_admin,utilisateur:a.utilisateur?{nom:a.utilisateur.nom,prenom:a.utilisateur.prenom,email:a.utilisateur.email}:"AUCUN UTILISATEUR",admin:a.admin?{nom:a.admin.nom,prenom:a.admin.prenom,email:a.admin.email}:"AUCUN ADMIN",prix_total_terrain:a.prix_total_terrain,montant_total_souscrit:a.montant_total_souscrit})});let t=this.souscriptions.map(a=>a.id_utilisateur),e=[...new Set(t)];console.log("\u{1F50D} IDs utilisateurs dans les souscriptions:",t),console.log("\u2728 IDs utilisateurs uniques:",e),console.log("\u{1F4C8} Nombre d'utilisateurs uniques d\xE9tect\xE9s:",e.length),e.length<2&&(console.warn("\u26A0\uFE0F ATTENTION: Moins de 2 utilisateurs uniques d\xE9tect\xE9s!"),console.warn("V\xE9rifiez que vos donn\xE9es contiennent bien des id_utilisateur diff\xE9rents"));let o=new Map;this.souscriptions.forEach((a,c)=>{let x=a.id_utilisateur;if(console.log(`
\u{1F504} Traitement souscription ${c+1} pour utilisateur ID: ${x}`),o.has(x))console.log(`\u{1F4DD} Ajout \xE0 un groupe EXISTANT pour l'utilisateur ${x}`);else{console.log(`\u2795 Cr\xE9ation d'un NOUVEAU groupe pour l'utilisateur ${x}`);let O="Utilisateur Inconnu",E="email@inconnu.com",I="UI";if(a.utilisateur){O=`${a.utilisateur.prenom||""} ${a.utilisateur.nom||""}`.trim(),E=a.utilisateur.email||"email@inconnu.com";let A=a.utilisateur.prenom?.charAt(0)||"",F=a.utilisateur.nom?.charAt(0)||"";I=(A+F).toUpperCase()||"UI"}else if(a.admin){O=`${a.admin.prenom||""} ${a.admin.nom||""}`.trim(),E=a.admin.email||"email@inconnu.com";let A=a.admin.prenom?.charAt(0)||"",F=a.admin.nom?.charAt(0)||"";I=(A+F).toUpperCase()||"UI"}let w={id_utilisateur:x,fullName:O,email:E,initials:I,souscriptions:[],totalAmount:0,totalInDelay:0};o.set(x,w),console.log("\u2705 Utilisateur cr\xE9\xE9:",{id:w.id_utilisateur,nom:w.fullName,email:w.email,initiales:w.initials})}let u=o.get(x);u.souscriptions.push(a);let v=a.prix_total_terrain||0;u.totalAmount+=v,this.isDatePassed(a.date_prochain)&&u.totalInDelay++,console.log(`\u{1F4CA} Utilisateur ${x} a maintenant ${u.souscriptions.length} souscription(s)`),console.log(`\u{1F4B0} Prix total terrain ajout\xE9: ${v}, nouveau total: ${u.totalAmount}`)}),this.groupedUsers=Array.from(o.values()),console.log(`
\u{1F3AF} R\xC9SULTAT FINAL DU GROUPEMENT:`),console.log("\u{1F465} Nombre d'utilisateurs group\xE9s:",this.groupedUsers.length),this.groupedUsers.forEach((a,c)=>{console.log(`Utilisateur ${c+1}:`,{id_utilisateur:a.id_utilisateur,fullName:a.fullName,email:a.email,initials:a.initials,nombreSouscriptions:a.souscriptions.length,montantTotal:a.totalAmount,enRetard:a.totalInDelay})}),this.groupedUsers.length===0?(console.error("\u{1F6A8} ERREUR CRITIQUE: Aucun utilisateur group\xE9 !"),console.error("V\xE9rifiez que this.souscriptions contient des donn\xE9es valides")):this.groupedUsers.length===1?(console.log("\u2139\uFE0F INFO: Un seul utilisateur group\xE9 d\xE9tect\xE9"),console.log("Ceci est normal si toutes les souscriptions appartiennent au m\xEAme utilisateur")):console.log("\u2705 SUCC\xC8S: Plusieurs utilisateurs group\xE9s correctement"),console.log(`\u{1F525} FIN DU GROUPEMENT
`)}viewDetails(t){console.log("\u{1F50D} Ouverture modal pour ID:",t);let e=this.souscriptions.find(a=>a.id_souscription===t);if(!e){console.error("\u274C Souscription non trouv\xE9e:",t);return}let o=this.convertToSubscriptionFormat(e);this.showModal(o)}convertToSubscriptionFormat(t){console.log("\u{1F504} Conversion de ApiSouscription vers Subscription:",t);let e="en-cours";switch(this.getStatusDisplay(t).status.toLowerCase()){case"termine":case"termin\xE9":e="termine";break;case"en_retard":e="en-retard";break;default:e="en-cours";break}let c=(t.planpaiements||[]).filter(u=>this.souscriptionService.parseAmount(u.montant_paye)>0&&u.date_paiement_effectif).map(u=>{let v=this.souscriptionService.parseAmount(u.montant_paye);return{date:u.date_paiement_effectif,dateFormatted:this.formatDate(u.date_paiement_effectif),amount:v,numero_mensualite:u.numero_mensualite,mode_paiement:u.mode_paiement||"Non sp\xE9cifi\xE9",reference_paiement:u.reference_paiement,statut_versement:u.statut_versement||"valid\xE9"}}).sort((u,v)=>{let O=new Date(u.date);return new Date(v.date).getTime()-O.getTime()}).map(u=>({date:u.dateFormatted||"Date non disponible",amount:u.amount,numero_mensualite:u.numero_mensualite,mode_paiement:u.mode_paiement,reference_paiement:u.reference_paiement,statut_versement:u.statut_versement}));console.log("\u{1F4B3} Paiements tri\xE9s par date d\xE9croissante (plus r\xE9cent en premier):",c);let x={id:t.id_souscription.toString(),terrain:t.terrain?.libelle||"Terrain non d\xE9fini",surface:t.terrain?.superficie||"0m\xB2",prixTotal:t.prix_total_terrain||0,montantPaye:this.souscriptionService.parseAmount(t.montant_paye),resteAPayer:t.reste_a_payer||0,dateDebut:t.date_souscription||new Date().toISOString(),prochainPaiement:t.date_prochain||"",statut:e,progression:this.getCompletionPercentage(t),payments:c};return console.log("\u2705 Subscription convertie avec paiements tri\xE9s:",x),x}showModal(t){console.log("\u{1F50D} Ouverture modal pour:",t.id),console.log("\u{1F4B3} Paiements tri\xE9s par date d\xE9croissante:",t.payments),t.payments&&Array.isArray(t.payments)?(this.lastFivePayments=t.payments.slice(0,5),console.log("\u{1F4CB} 5 derniers paiements (ordre d\xE9croissant - plus r\xE9cent en premier):",this.lastFivePayments)):(this.lastFivePayments=[],console.log("\u26A0\uFE0F Aucun paiement trouv\xE9 pour cette souscription")),this.selectedSubscriptionId=t.id,this.selectedSubscriptionInfo={terrain:t.terrain,surface:t.surface,progression:t.progression,montantPaye:t.montantPaye,resteAPayer:t.resteAPayer,statut:t.statut},this.isVisible=!0}handleCancel(){console.log("\u274C Fermeture du modal"),this.isVisible=!1,this.selectedSubscriptionId=null,this.selectedSubscriptionInfo=null,this.lastFivePayments=[]}handleOk(){if(this.isVisible=!1,this.lastFivePayments=[],this.selectedSubscriptionId){let t=this.selectedSubscriptionId.replace("SUB","").replace(/^0+/,"");console.log("\u{1F517} Navigation vers d\xE9tails paiement admin:",t),this.router.navigate(["/dashboard/admin/details/paiement-details-admin",t])}this.selectedSubscriptionId=null,this.selectedSubscriptionInfo=null}makePayment(t){console.log("Ouverture modal de paiement pour la souscription:",t);let e=this.souscriptions.find(o=>o.id_souscription===t);if(!e){console.error("Souscription non trouv\xE9e:",t),this.message.error("Souscription non trouv\xE9e");return}this.selectedSouscriptionForPayment=e,this.paymentForm={id_souscription:t,mode_paiement:"",montant_paye:0,date_paiement_effectif:new Date().toISOString().split("T")[0],reference_paiement:"",commentaire_paiement:""},this.isPaymentModalVisible=!0}handlePaymentModalCancel(){this.isPaymentModalVisible=!1,this.selectedSouscriptionForPayment=null,this.resetPaymentForm()}submitPayment(){return D(this,null,function*(){if(!this.paymentForm.mode_paiement){this.message.error("Mode de paiement requis");return}if(!this.paymentForm.montant_paye||this.paymentForm.montant_paye<=0){this.message.error("Montant de paiement requis et doit \xEAtre sup\xE9rieur \xE0 0");return}if(!this.paymentForm.date_paiement_effectif){this.message.error("Date de paiement requise");return}let t=this.validatePaymentData(this.paymentForm);if(!t.valid){t.errors.forEach(o=>this.message.error(o));return}let e=this.getMontantRestant(this.selectedSouscriptionForPayment);if(this.paymentForm.montant_paye>e){this.message.error(`Le montant ne peut pas d\xE9passer le reste \xE0 payer (${this.formatCurrency(e)})`);return}console.log("Soumission du paiement:",this.paymentForm),this.isProcessingPayment=!0;try{let o=yield this.effectuerPaiement(this.paymentForm);console.log("Paiement effectu\xE9 avec succ\xE8s:",o),o.success?(this.message.success("Paiement enregistr\xE9 avec succ\xE8s!"),this.isPaymentModalVisible=!1,this.resetPaymentForm(),this.loadSouscriptions()):this.message.error(o.message||"Erreur lors de l'enregistrement du paiement")}catch(o){console.error("Erreur lors du paiement:",o);let a="Erreur lors de l'enregistrement du paiement";o.message&&(a=o.message),this.message.error(a)}finally{this.isProcessingPayment=!1}})}resetPaymentForm(){this.paymentForm={id_souscription:0,mode_paiement:"",montant_paye:0,date_paiement_effectif:"",reference_paiement:"",commentaire_paiement:""}}getMontantRestant(t){return t.reste_a_payer||0}getTerrainName(t){return t.terrain?.libelle||"Terrain non d\xE9fini"}onPageChange(t){this.filters.page=t,this.loadSouscriptions()}onPageSizeChange(t){this.perPage=t,this.filters.per_page=t,this.filters.page=1,this.loadSouscriptions()}filterByStatus(t){this.filters.statut=t===""?void 0:t,this.filters.page=1,this.loadSouscriptions(),console.log("Filtre statut appliqu\xE9:",t)}filterByPeriod(t,e){this.filters.date_debut=t,this.filters.date_fin=e,this.filters.page=1,this.loadSouscriptions()}filterBySuperficie(t){this.filters.superficie=t,this.filters.page=1,this.loadSouscriptions(),console.log("Filtre superficie appliqu\xE9:",t)}onSearch(t){this.filters.search=t,this.filters.page=1,this.loadSouscriptions(),console.log("Recherche appliqu\xE9e:",t)}refresh(){this.loadSouscriptions(),console.log("Actualisation des donn\xE9es...")}resetFilters(){this.filters={page:1,per_page:100},this.searchTerm="",this.statusFilter="",this.surfaceFilter="",this.dateDebut="",this.dateFin="",this.loadSouscriptions()}formatCurrency(t){return this.souscriptionService.formatCurrency(t)}getCompletionPercentage(t){return this.souscriptionService.calculateCompletionPercentage(t)}getStatusDisplay(t){let e=this.souscriptionService.calculateSouscriptionStatus(t),o=t.statut_souscription,a=e||o||"en_attente";switch((!a||typeof a!="string")&&(a="en_attente"),a.toLowerCase()){case"termine":case"termin\xE9":return{status:a,color:"green",label:"Termin\xE9"};case"en_retard":return{status:a,color:"red",label:"En retard"};case"en_cours":return{status:a,color:"blue",label:"En cours"};case"suspendu":return{status:a,color:"orange",label:"Suspendu"};case"annule":case"annul\xE9":return{status:a,color:"default",label:"Annul\xE9"};case"en_attente":return{status:a,color:"cyan",label:"En attente"};default:return{status:a,color:"default",label:a||"Non d\xE9fini"}}}exportData(t){this.souscriptionService.exporterSouscriptions(t,this.filters).subscribe({next:e=>{let o=window.URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download=`souscriptions.${t==="pdf"?"pdf":"xlsx"}`,a.click(),window.URL.revokeObjectURL(o)},error:e=>{console.error("Erreur export:",e)}})}calculateTotalAmount(){return this.souscriptions.reduce((t,e)=>{let o=e.prix_total_terrain||0;return t+o},0)}calculateTotalPaid(){return this.souscriptions.reduce((t,e)=>{let o=this.souscriptionService.parseAmount(e.montant_paye);return t+o},0)}calculateTotalRemaining(){return this.souscriptions.reduce((t,e)=>{let o=e.reste_a_payer||0;return t+o},0)}getUserFullName(t){return t.utilisateur?`${t.utilisateur.prenom} ${t.utilisateur.nom}`:t.admin?`${t.admin.prenom} ${t.admin.nom}`:`Utilisateur ${t.id_utilisateur}`}getUserInitials(t){if(t.utilisateur){let e=t.utilisateur.prenom?.charAt(0)||"",o=t.utilisateur.nom?.charAt(0)||"";return(e+o).toUpperCase()}if(t.admin){let e=t.admin.prenom?.charAt(0)||"",o=t.admin.nom?.charAt(0)||"";return(e+o).toUpperCase()}return`U${t.id_utilisateur.toString().slice(-1)}`}formatDate(t){return t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"Non d\xE9finie"}isDatePassed(t){if(!t)return!1;let e=new Date(t),o=new Date;return o.setHours(0,0,0,0),e<o}isDateUrgent(t){if(!t)return!1;let e=new Date(t),o=new Date,a=e.getTime()-o.getTime(),c=Math.ceil(a/(1e3*60*60*24));return c<=7&&c>=0}trackByFn(t,e){return e.id_utilisateur}editSouscription(t){console.log("Modifier souscription:",t)}viewPaymentPlan(t){console.log("Plan de paiement pour:",t)}AddNewSouscription(){this.router.navigate(["/dashboard/admin/details/create-souscription-admin"])}onSearchChange(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.onSearch(this.searchTerm)},500)}onStatusFilterChange(){this.filterByStatus(this.statusFilter)}onSurfaceFilterChange(){let t=this.surfaceFilter===""?void 0:Number(this.surfaceFilter);this.filterBySuperficie(t)}getStatusColor(t){switch(t.toLowerCase()){case"termine":case"termin\xE9":return"green";case"en-retard":case"en_retard":return"red";case"en-cours":case"en_cours":return"blue";default:return"default"}}getStatusLabel(t){switch(t.toLowerCase()){case"termine":case"termin\xE9":return"Termin\xE9";case"en-retard":case"en_retard":return"En retard";case"en-cours":case"en_cours":return"En cours";default:return t}}formatAmount(t){return this.formatCurrency(t)}trackByPayment(t,e){return`${e.date}-${e.amount}-${t}`}formatPaymentMode(t){return t||"Non d\xE9fini"}formatPaymentStatus(t){if(!t)return"Non d\xE9fini";switch(t.toLowerCase()){case"valid\xE9":case"valide":return"Valid\xE9";case"en_attente":return"En attente";case"rejet\xE9":case"rejete":return"Rejet\xE9";default:return t}}getPaymentStatusColor(t){if(!t)return"default";switch(t.toLowerCase()){case"valid\xE9":case"valide":return"green";case"en_attente":return"orange";case"rejet\xE9":case"rejete":return"red";default:return"default"}}static \u0275fac=function(e){return new(e||l)(z(Le),z(We),z(G),z(je))};static \u0275cmp=B({type:l,selectors:[["app-admin-souscription"]],standalone:!0,features:[L],decls:65,vars:16,consts:[["userHeaderTemplate",""],["subscriptionTable",""],["actionMenu","nzDropdownMenu"],[1,"subscription-wrapper"],[1,"header-section"],[1,"main-title"],[1,"fas","fa-map-marked-alt"],[1,"subtitle"],[1,"controls-section"],[1,"search-and-action"],[1,"search-container"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Rechercher par nom, pr\xE9nom, terrain, montant...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-section"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],["value","en_cours"],["value","en_retard"],["value","termine"],["value","250"],["value","500"],[1,"refresh-btn",3,"click"],[1,"fas","fa-sync-alt"],[1,"stats-bar"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"user-accordion",3,"nzAccordion","nzBordered"],["class","user-panel",3,"nzShowArrow","nzHeader",4,"ngFor","ngForOf","ngForTrackBy"],["nzTitle","D\xE9tails... des paiements","nzWidth","450px","nzCentered","","nzClassName","compact-modal",3,"nzVisibleChange","nzOnCancel","nzVisible","nzFooter"],[4,"nzModalContent"],["nzTitle","Effectuer un paiement","nzCancelText","Annuler","nzWidth","650px",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkText","nzOkDisabled"],[1,"user-panel",3,"nzShowArrow","nzHeader"],[1,"subscription-table-container"],[1,"subscription-table",3,"nzData","nzPageSize","nzShowPagination","nzBordered"],[1,"table-header-row"],[1,"table-header-cell","id-column"],[1,"table-header-cell","terrain-column"],[1,"table-header-cell","price-column"],[1,"table-header-cell","paid-column"],[1,"table-header-cell","remaining-column"],[1,"table-header-cell","progress-column"],[1,"table-header-cell","payment-column"],[1,"table-header-cell","status-column"],[1,"table-header-cell","action-column"],["class","table-data-row",4,"ngFor","ngForOf"],[1,"user-header-content"],[1,"user-info-section"],["nzSize","large",1,"user-avatar",3,"nzText"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-stats"],[1,"stat-item"],[1,"stat-value"],[1,"stat-text"],[1,"fas","fa-chevron-up","panel-arrow"],[1,"table-data-row"],[1,"table-data-cell"],[1,"subscription-id"],[1,"terrain-info"],[1,"terrain-icon"],[1,"fas","fa-map"],[1,"terrain-details"],[1,"terrain-name"],[1,"terrain-surface"],[1,"price-info"],[1,"price-amount"],[1,"progress-bar"],[1,"progress-fill"],[1,"amount-paid"],[1,"amount-remaining"],[1,"date-debut"],[1,"next-payment-date"],[1,"status-tag",3,"nzColor"],["class","fas fa-play",4,"ngIf"],[1,"status-text"],["nzRight",""],["nzSize","small"],["nz-button","","nzType","primary","nzSize","default","nz-dropdown","","nzPlacement","bottomRight","style","width: 40px; height: 32px; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 2px;",3,"nzDropdownMenu",4,"nzSpaceItem"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","eye"],["nz-icon","","nzType","dollar"],["nz-menu-divider",""],[1,"fas","fa-play"],["nz-button","","nzType","primary","nzSize","default","nz-dropdown","","nzPlacement","bottomRight",2,"width","40px","height","32px","display","flex","align-items","center","justify-content","center","flex-direction","column","gap","2px",3,"nzDropdownMenu"],[2,"width","3px","height","3px","background-color","white","border-radius","50%"],[1,"modal-content-compact"],["class","subscription-info-compact",4,"ngIf"],[1,"payments-section-compact"],[1,"payments-header-compact"],[1,"payments-title-compact"],[1,"fas","fa-history"],["class","payments-count-compact",4,"ngIf"],["class","payments-list-compact",4,"ngIf"],["class","no-payments-compact",4,"ngIf"],[1,"modal-actions-compact"],["nz-button","","nzType","default",1,"btn-compact","cancel-btn-compact",3,"click"],[1,"fas","fa-times"],["nz-button","","nzType","primary",1,"btn-compact","details-btn-compact",3,"click"],[1,"fas","fa-eye"],[1,"subscription-info-compact"],[1,"subscription-header-compact"],[1,"subscription-title-compact"],[1,"status-tag-compact",3,"nzColor"],[1,"terrain-details-compact"],[1,"terrain-row"],[1,"label-compact"],[1,"value-compact"],[1,"amounts-summary-compact"],[1,"amount-item-compact"],[1,"amount-label"],[1,"amount-value","paid"],[1,"amount-value","remaining"],[1,"payments-count-compact"],[1,"payments-list-compact"],["class","payment-item-compact",4,"ngFor","ngForOf","ngForTrackBy"],[1,"payment-item-compact"],[1,"payment-main-compact"],[1,"payment-date-compact"],[1,"fas","fa-calendar-alt"],[1,"payment-amount-compact"],["class","payment-details-compact",4,"ngIf"],[1,"payment-details-compact"],["class","detail-compact",4,"ngIf"],["class","status-tag-small",3,"nzColor",4,"ngIf"],[1,"detail-compact"],[1,"status-tag-small",3,"nzColor"],[1,"no-payments-compact"],[1,"fas","fa-info-circle"],["class","payment-modal-content",4,"ngIf"],[1,"payment-modal-content"],[1,"subscription-info",2,"background","#f8f9fa","padding","16px","border-radius","6px","margin-bottom","24px","border","1px solid #e9ecef"],[2,"margin","0 0 12px 0","color","#1f2937","font-size","16px","font-weight","600"],["nz-icon","","nzType","info-circle",2,"margin-right","8px","color","#1890ff"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","gap","12px","font-size","14px"],[2,"display","flex","justify-content","space-between"],[2,"color","#6b7280","font-weight","500"],[2,"color","#1f2937","font-weight","600"],[2,"color","#059669","font-weight","600"],[2,"color","#ef4444","font-weight","700","font-size","15px"],[1,"payment-form"],[2,"margin-bottom","20px"],[2,"display","block","margin-bottom","8px","font-weight","600","color","#374151","font-size","14px"],["nz-icon","","nzType","credit-card",2,"margin-right","6px","color","#1890ff"],[2,"color","#ef4444"],["name","mode_paiement",2,"width","100%","padding","10px 12px","border","1px solid #d1d5db","border-radius","6px","font-size","14px","background-color","white","transition","border-color 0.2s",3,"ngModelChange","ngModel"],["value","cheque"],["value","especes"],["value","virement"],["value","carte"],["value","mobile"],["value","mandat"],["nz-icon","","nzType","dollar",2,"margin-right","6px","color","#1890ff"],["type","number","name","montant_paye","min","1","placeholder","Entrez le montant",2,"width","100%","padding","10px 12px","border","1px solid #d1d5db","border-radius","6px","font-size","14px","transition","border-color 0.2s",3,"ngModelChange","ngModel","max"],[2,"color","#6b7280","margin-top","4px","display","block","font-size","12px"],["nz-icon","","nzType","info-circle",2,"margin-right","4px"],["nz-icon","","nzType","tag",2,"margin-right","6px","color","#1890ff"],["type","text","name","reference_paiement","placeholder","Entrez la r\xE9f\xE9rence (optionnel)",2,"width","100%","padding","10px 12px","border","1px solid #d1d5db","border-radius","6px","font-size","14px","transition","border-color 0.2s",3,"ngModelChange","ngModel"],["nz-icon","","nzType","calendar",2,"margin-right","6px","color","#1890ff"],["type","date","name","date_paiement_effectif",2,"width","100%","padding","10px 12px","border","1px solid #d1d5db","border-radius","6px","font-size","14px","transition","border-color 0.2s",3,"ngModelChange","ngModel"],["nz-icon","","nzType","message",2,"margin-right","6px","color","#1890ff"],["name","commentaire_paiement","rows","3","placeholder","Ajoutez un commentaire optionnel (ex: notes sur le paiement)",2,"width","100%","padding","10px 12px","border","1px solid #d1d5db","border-radius","6px","font-size","14px","resize","vertical","transition","border-color 0.2s",3,"ngModelChange","ngModel"],[2,"background","linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)","padding","16px","border-radius","8px","border-left","4px solid #3b82f6","margin-top","20px"],[2,"margin","0 0 12px 0","color","#1e40af","font-size","15px","font-weight","600"],["nz-icon","","nzType","file-text",2,"margin-right","6px"],[2,"font-size","14px","color","#1f2937"],[2,"display","flex","justify-content","space-between","margin-bottom","8px","padding","4px 0"],[2,"color","#6b7280"],[2,"font-weight","500","color","#1f2937"],[4,"ngIf"],["style","color: #9ca3af;",4,"ngIf"],[2,"font-weight","600","color","#059669","font-size","15px"],["style","display: flex; justify-content: space-between; margin-bottom: 8px; padding: 4px 0;",4,"ngIf"],[2,"display","flex","justify-content","space-between","padding","8px 0","border-top","1px solid #e5e7eb"],[2,"font-weight","700","color","#059669","font-size","15px"],["style","margin-top: 12px; padding-top: 8px; border-top: 1px solid #e5e7eb; font-size: 13px; color: #6b7280;",4,"ngIf"],["style","background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 6px; padding: 12px; margin-top: 16px;",4,"ngIf"],[2,"color","#9ca3af"],[2,"margin-top","12px","padding-top","8px","border-top","1px solid #e5e7eb","font-size","13px","color","#6b7280"],[2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","6px","padding","12px","margin-top","16px"],[2,"display","flex","align-items","center","color","#0369a1"],["nz-icon","","nzType","check-circle",2,"color","#10b981","margin-right","8px","font-size","16px"],[2,"font-size","14px","font-weight","500"]],template:function(e,o){e&1&&(n(0,"div",3)(1,"div",4)(2,"h1",5),p(3,"i",6),r(4," Gestion des Souscriptions "),i(),n(5,"p",7),r(6,"G\xE9rez toutes les souscriptions des agents du CHU Angr\xE9"),i()(),n(7,"div",8)(8,"div",9)(9,"div",10),p(10,"i",11),n(11,"input",12),y("ngModelChange",function(c){return C(o.searchTerm,c)||(o.searchTerm=c),c}),h("input",function(){return o.onSearchChange()}),i()(),n(12,"div",13)(13,"button",14),h("click",function(){return o.AddNewSouscription()}),p(14,"i",15),n(15,"span"),r(16,"Nouvelle Souscription"),i()()()(),n(17,"div",16)(18,"select",17),y("ngModelChange",function(c){return C(o.statusFilter,c)||(o.statusFilter=c),c}),h("change",function(){return o.onStatusFilterChange()}),n(19,"option",18),r(20,"Tous les statuts"),i(),n(21,"option",19),r(22,"En cours"),i(),n(23,"option",20),r(24,"En retard"),i(),n(25,"option",21),r(26,"Termin\xE9"),i()(),n(27,"select",17),y("ngModelChange",function(c){return C(o.surfaceFilter,c)||(o.surfaceFilter=c),c}),h("change",function(){return o.onSurfaceFilterChange()}),n(28,"option",18),r(29,"Toutes les surfaces"),i(),n(30,"option",22),r(31,"250m\xB2"),i(),n(32,"option",23),r(33,"500m\xB2"),i()(),n(34,"button",24),h("click",function(){return o.refresh()}),p(35,"i",25),n(36,"span"),r(37,"Actualiser"),i()()()(),n(38,"div",26)(39,"div",27)(40,"div",28),r(41),i(),n(42,"div",29),r(43,"Total Souscriptions"),i()(),n(44,"div",27)(45,"div",28),r(46),i(),n(47,"div",29),r(48,"Montant Total"),i()(),n(49,"div",27)(50,"div",28),r(51),i(),n(52,"div",29),r(53,"D\xE9j\xE0 Pay\xE9"),i()(),n(54,"div",27)(55,"div",28),r(56),i(),n(57,"div",29),r(58,"Reste \xE0 Payer"),i()()(),n(59,"nz-collapse",30),f(60,Qe,28,7,"nz-collapse-panel",31),i()(),n(61,"nz-modal",32),y("nzVisibleChange",function(c){return C(o.isVisible,c)||(o.isVisible=c),c}),h("nzOnCancel",function(){return o.handleCancel()}),f(62,at,18,4,"ng-container",33),i(),n(63,"nz-modal",34),y("nzVisibleChange",function(c){return C(o.isPaymentModalVisible,c)||(o.isPaymentModalVisible=c),c}),h("nzOnCancel",function(){return o.handlePaymentModalCancel()})("nzOnOk",function(){return o.submitPayment()}),f(64,xt,2,1,"ng-container",33),i()),e&2&&(s(11),b("ngModel",o.searchTerm),s(7),b("ngModel",o.statusFilter),s(9),b("ngModel",o.surfaceFilter),s(14),g(o.totalSouscriptions),s(5),g(o.formatCurrency(o.calculateTotalAmount())),s(5),g(o.formatCurrency(o.calculateTotalPaid())),s(5),g(o.formatCurrency(o.calculateTotalRemaining())),s(3),m("nzAccordion",!0)("nzBordered",!1),s(),m("ngForOf",o.groupedUsers)("ngForTrackBy",o.trackByFn),s(),b("nzVisible",o.isVisible),m("nzFooter",null),s(2),b("nzVisible",o.isPaymentModalVisible),m("nzOkText","Effectuer le paiement")("nzOkDisabled",!o.paymentForm.mode_paiement||!o.paymentForm.montant_paye||o.paymentForm.montant_paye<=0||!o.paymentForm.date_paiement_effectif))},dependencies:[$,j,q,xe,me,ue,ge,ae,pe,de,re,se,_e,fe,ce,le,Ce,be,he,J,X,Fe,Te,we,ze,Ae,Ee,Ie,Oe,De,ke,te,ee,K,Z,oe,ie,ne,Ve,Ue,Ne,ve,Y,H,Q,ye,Se,Pe,Re,Me,Be],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;padding:10px;box-sizing:border-box;overflow:auto;position:relative}.subscription-wrapper[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0 auto;background:#fffffff7;border-radius:18px;padding:20px;box-shadow:0 8px 32px #1e3a8a14;box-sizing:border-box;display:flex;flex-direction:column;gap:20px;min-height:auto}.header-section[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.header-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:10px;line-height:1.2}.header-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.header-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#ffb300;font-weight:800;font-size:1.1rem;letter-spacing:.7px;text-shadow:0 2px 8px rgba(102,126,234,.08);margin-top:6px;margin-bottom:0}.controls-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}.controls-section[_ngcontent-%COMP%]   .search-and-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.controls-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;flex:1;min-width:200px}.controls-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 40px;font-size:.95rem;border:2px solid #e5e7eb;border-radius:10px;background:#fff;transition:all .3s ease;box-sizing:border-box}.controls-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 6px 20px #667eea1a;transform:translateY(-1px)}.controls-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:.95rem}.controls-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;cursor:pointer;transition:all .3s ease;font-weight:600;font-size:.95rem;display:flex;align-items:center;gap:6px;white-space:nowrap}.controls-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 20px #667eea4d}.controls-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.controls-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.controls-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{flex:1;min-width:120px;padding:10px 12px;border:2px solid #e5e7eb;border-radius:10px;background:#fff;font-size:.95rem;cursor:pointer;transition:all .3s ease;box-sizing:border-box}.controls-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 8px 25px #667eea26}.controls-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;cursor:pointer;transition:all .3s ease;font-weight:600;font-size:.95rem;white-space:nowrap}.controls-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 20px #667eea4d}  .user-accordion{background:#f8fafc;border-radius:16px;box-shadow:0 8px 32px #00000014;overflow:hidden;border:none!important}[_ngcontent-%COMP%]:is()   .ant-collapse-item[_ngcontent-%COMP%]{border:none!important;border-bottom:1px solid #e2e8f0!important;background:#f8fafc!important}[_ngcontent-%COMP%]:is()   .ant-collapse-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}[_ngcontent-%COMP%]:is()   .ant-collapse-header[_ngcontent-%COMP%]{padding:20px 24px!important;background:#f8fafc!important;border-bottom:none!important;transition:all .3s ease}[_ngcontent-%COMP%]:is()   .ant-collapse-header[_ngcontent-%COMP%]:hover{background:#f1f5f9!important}[_ngcontent-%COMP%]:is()   .ant-collapse-header[_ngcontent-%COMP%]   .ant-collapse-arrow[_ngcontent-%COMP%]{display:none!important}[_ngcontent-%COMP%]:is()   .ant-collapse-item-active[_ngcontent-%COMP%]   .ant-collapse-header[_ngcontent-%COMP%]{background:#e2e8f0!important;border-bottom:1px solid #cbd5e1!important}[_ngcontent-%COMP%]:is()   .ant-collapse-content[_ngcontent-%COMP%]{border-top:none!important;background:#fff!important}[_ngcontent-%COMP%]:is()   .ant-collapse-content-box[_ngcontent-%COMP%]{padding:0!important}.user-header-content[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between;position:relative}.user-info-section[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.user-avatar[_ngcontent-%COMP%]{margin-right:16px!important}.user-avatar[_ngcontent-%COMP%]     .ant-avatar{background:#8b5cf6!important;color:#fff!important;font-weight:700!important;font-size:1.1rem!important;width:48px!important;height:48px!important;border:2px solid white!important;box-shadow:0 2px 8px #8b5cf64d!important}.user-details[_ngcontent-%COMP%]{flex-shrink:0}.user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1f2937;margin-bottom:4px;line-height:1.2;white-space:nowrap}.user-details[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;line-height:1.2;white-space:nowrap}.user-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:40px;flex:1;justify-content:flex-end;margin-right:40px}.user-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;flex-shrink:0}.user-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#1f2937;display:block;line-height:1.2;white-space:nowrap}.user-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;text-transform:uppercase;letter-spacing:.5px;margin-top:2px;line-height:1;white-space:nowrap}.panel-arrow[_ngcontent-%COMP%]{font-size:1.2rem;color:#6b7280;transition:transform .3s ease;flex-shrink:0;margin-left:auto}  .ant-collapse-item-active .panel-arrow{transform:rotate(180deg)!important}.subscription-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}  .subscription-table{width:100%!important;margin:0!important;background:#fff!important}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{background:#f0f2f5!important;border-bottom:1px solid #d9d9d9!important;color:#595959!important;font-weight:600!important;font-size:.8rem!important;text-transform:uppercase!important;letter-spacing:.5px!important;padding:16px 12px!important;text-align:left!important}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.id-column[_ngcontent-%COMP%]{width:80px}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.terrain-column[_ngcontent-%COMP%]{width:200px}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:is(.price-column, .paid-column[_ngcontent-%COMP%], .remaining-column)[_ngcontent-%COMP%]{width:120px}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.payment-column[_ngcontent-%COMP%]{width:140px}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.status-column[_ngcontent-%COMP%]{width:120px}[_ngcontent-%COMP%]:is()   .ant-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.action-column[_ngcontent-%COMP%]{width:120px}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:16px 12px!important;border-bottom:1px solid #f0f0f0!important;vertical-align:middle!important;background:#fff!important}[_ngcontent-%COMP%]:is()   .ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%]{background:#fafafa!important}.subscription-id[_ngcontent-%COMP%]{font-weight:700;color:#2563eb;font-size:.9rem;letter-spacing:.3px}.terrain-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.terrain-info[_ngcontent-%COMP%]   .terrain-icon[_ngcontent-%COMP%]{width:32px;height:32px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:6px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.8rem;flex-shrink:0}.terrain-info[_ngcontent-%COMP%]   .terrain-details[_ngcontent-%COMP%]{flex:1;min-width:0}.terrain-info[_ngcontent-%COMP%]   .terrain-details[_ngcontent-%COMP%]   .terrain-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:2px;font-size:.9rem;line-height:1.2}.terrain-info[_ngcontent-%COMP%]   .terrain-details[_ngcontent-%COMP%]   .terrain-surface[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;line-height:1.2}.price-info[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;font-size:.9rem;margin-bottom:6px}.price-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden}.price-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#10b981,#059669);border-radius:2px;transition:width .8s ease}.amount-paid[_ngcontent-%COMP%]{color:#10b981;font-weight:600;font-size:.9rem}.amount-remaining[_ngcontent-%COMP%]{color:#ef4444;font-weight:600;font-size:.9rem}.date-debut[_ngcontent-%COMP%], .next-payment-date[_ngcontent-%COMP%]{font-size:.9rem;color:#1f2937;font-weight:500}  .status-tag{border-radius:6px!important;font-weight:600!important;font-size:.8rem!important;padding:4px 8px!important;border:none!important;display:inline-flex!important;align-items:center!important;gap:4px!important}[_ngcontent-%COMP%]:is().ant-tag-blue{background:#e6f3ff!important;color:#1890ff!important;border:1px solid #91d5ff!important}[_ngcontent-%COMP%]:is()   .status-text[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}[_ngcontent-%COMP%]:is()   i[_ngcontent-%COMP%]{font-size:.7rem}  .details-btn{background:#1890ff!important;border-color:#1890ff!important;border-radius:6px!important;font-weight:600!important;font-size:.8rem!important;height:auto!important;padding:6px 12px!important;display:inline-flex!important;align-items:center!important;gap:6px!important}[_ngcontent-%COMP%]:is():is(:hover, [_ngcontent-%COMP%]:focus){background:#40a9ff!important;border-color:#40a9ff!important;transform:translateY(-1px);box-shadow:0 4px 12px #1890ff4d}[_ngcontent-%COMP%]:is()   i[_ngcontent-%COMP%]{font-size:.8rem}  .compact-modal .ant-modal{max-width:90vw}  .compact-modal .ant-modal-content{border-radius:8px!important;overflow:hidden!important}  .compact-modal .ant-modal-body{padding:16px!important}  .compact-modal .ant-modal-header{padding:12px 16px!important;border-bottom:1px solid #f0f0f0!important}  .compact-modal .ant-modal-title{font-size:14px!important;font-weight:600!important}.modal-content-compact[_ngcontent-%COMP%]{padding:0;font-size:12px;line-height:1.4}.subscription-info-compact[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f0f9ff);padding:12px;border-radius:6px;margin-bottom:12px;border:1px solid #e3f2fd}.subscription-header-compact[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.subscription-title-compact[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1890ff;display:flex;align-items:center;gap:6px}.subscription-title-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.status-tag-compact[_ngcontent-%COMP%]{font-size:10px!important;padding:2px 6px!important;line-height:1.2!important;border-radius:4px!important}.terrain-details-compact[_ngcontent-%COMP%]{margin-bottom:10px}.terrain-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:3px 0;font-size:11px}.label-compact[_ngcontent-%COMP%]{color:#666;font-weight:500}.value-compact[_ngcontent-%COMP%]{color:#333;font-weight:600}.amounts-summary-compact[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:8px;border-top:1px solid #e3f2fd}.amount-item-compact[_ngcontent-%COMP%]{flex:1;text-align:center;padding:6px;background:#ffffffb3;border-radius:4px}.amount-label[_ngcontent-%COMP%]{display:block;font-size:9px;color:#666;margin-bottom:2px;text-transform:uppercase;letter-spacing:.3px}.amount-value[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:700}.amount-value.paid[_ngcontent-%COMP%]{color:#52c41a}.amount-value.remaining[_ngcontent-%COMP%]{color:#ff4d4f}.payments-section-compact[_ngcontent-%COMP%]{margin-bottom:12px}.payments-header-compact[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.payments-title-compact[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333;display:flex;align-items:center;gap:6px}.payments-title-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1890ff;font-size:12px}.payments-count-compact[_ngcontent-%COMP%]{font-size:9px;color:#666;background:#f0f2f5;padding:2px 6px;border-radius:8px;min-width:20px;text-align:center}.payments-list-compact[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto;padding-right:4px}.payments-list-compact[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.payments-list-compact[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f0f0;border-radius:2px}.payments-list-compact[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d9d9d9;border-radius:2px}.payments-list-compact[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#bfbfbf}.payment-item-compact[_ngcontent-%COMP%]{background:#fafafa;border:1px solid #e8e8e8;border-radius:4px;padding:8px;margin-bottom:6px;transition:all .2s ease}.payment-item-compact[_ngcontent-%COMP%]:hover{background:#f0f9ff;border-color:#91d5ff;transform:translateY(-1px);box-shadow:0 1px 4px #1890ff26}.payment-main-compact[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.payment-date-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-weight:500;color:#333;font-size:11px}.payment-date-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1890ff;font-size:10px}.payment-amount-compact[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#52c41a}.payment-details-compact[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;align-items:center;padding-top:6px;border-top:1px solid #f0f0f0}.detail-compact[_ngcontent-%COMP%]{font-size:10px;color:#666;background:#f8f8f8;padding:2px 6px;border-radius:3px;border:1px solid #e8e8e8}.status-tag-small[_ngcontent-%COMP%]{font-size:9px!important;padding:1px 4px!important;line-height:1.1!important;border-radius:3px!important;margin:0!important}.no-payments-compact[_ngcontent-%COMP%]{text-align:center;padding:20px 10px;background:#fafafa;border-radius:4px;border:1px dashed #d9d9d9;color:#999;font-size:11px;display:flex;align-items:center;justify-content:center;gap:6px}.no-payments-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#d9d9d9}.modal-actions-compact[_ngcontent-%COMP%]{display:flex;gap:8px;padding-top:12px;border-top:1px solid #f0f0f0}.btn-compact[_ngcontent-%COMP%]{flex:1;height:32px!important;font-size:11px!important;padding:0 12px!important;display:flex;align-items:center;justify-content:center;gap:4px;font-weight:500;border-radius:4px}.btn-compact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.cancel-btn-compact[_ngcontent-%COMP%]{border-color:#d9d9d9;color:#666}.details-btn-compact[_ngcontent-%COMP%]{background:#1890ff;border-color:#1890ff}.cancel-btn-compact[_ngcontent-%COMP%]:hover{border-color:#40a9ff;color:#40a9ff}.details-btn-compact[_ngcontent-%COMP%]:hover{background:#40a9ff;border-color:#40a9ff}.stats-bar[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-bottom:20px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:12px 8px;border-radius:12px;text-align:center;border:1px solid rgba(102,126,234,.1);transition:all .3s ease;min-height:70px;display:flex;flex-direction:column;justify-content:center}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #0000001a}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1f2937;margin-bottom:4px;line-height:1.1;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;font-weight:500;line-height:1.2;word-break:break-word}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:nth-child(3)   .stat-number[_ngcontent-%COMP%]{color:#10b981!important}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:nth-child(4)   .stat-number[_ngcontent-%COMP%]{color:#f59e0b!important}@media (max-width: 768px){.stats-bar[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:10px 6px;min-height:65px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:.95rem}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.stats-bar[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:8px 4px;min-height:60px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.65rem;line-height:1.1}}@media (max-width: 320px){.stats-bar[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:6px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:6px 3px;min-height:55px}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.stats-bar[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.6rem}}"]})};export{qe as AdminSouscriptionComponent};
