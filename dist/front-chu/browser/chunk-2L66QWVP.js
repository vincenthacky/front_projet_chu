import{a as u}from"./chunk-V6I33QLD.js";import{c as i,g as c}from"./chunk-YLHBJJO7.js";import{_ as o,da as s,ia as p}from"./chunk-EIVDWLNO.js";import{a}from"./chunk-4CLCTAJ7.js";var m=class r{constructor(e){this.http=e}API_URL=u.apiUrl;getMesReclamations(e){let t=new i;return e&&(e.page&&(t=t.set("page",e.page.toString())),e.per_page&&(t=t.set("per_page",e.per_page.toString())),e.type&&(t=t.set("type",e.type)),e.statut&&(t=t.set("statut",e.statut.toString())),e.priorite&&(t=t.set("priorite",e.priorite)),e.date_debut&&(t=t.set("date_debut",e.date_debut)),e.date_fin&&(t=t.set("date_fin",e.date_fin)),e.search&&(t=t.set("search",e.search))),this.http.get(`${this.API_URL}/reclamations/utilisateur`,{params:t}).pipe(o(n=>{console.log("Mes r\xE9clamations r\xE9cup\xE9r\xE9es:",n)}))}createReclamation(e){if(e.document){let t=new FormData;return t.append("id_souscription",e.id_souscription.toString()),t.append("titre",e.titre),t.append("description",e.description),t.append("type_reclamation",e.type_reclamation),t.append("id_statut_reclamation",e.id_statut_reclamation.toString()),e.priorite&&t.append("priorite",e.priorite),t.append("document",e.document),t.append("nom_original",e.document.name),t.append("nom_original_document",e.document.name),t.append("original_name",e.document.name),t.append("file_original_name",e.document.name),console.log("FormData envoy\xE9:",{nom_fichier:e.document.name,nom_original:e.document.name,taille:e.document.size}),this.http.post(`${this.API_URL}/reclamations`,t).pipe(o(n=>{console.log("R\xE9clamation avec document cr\xE9\xE9e:",n)}))}else{let t=a({id_souscription:e.id_souscription,titre:e.titre,description:e.description,type_reclamation:e.type_reclamation,id_statut_reclamation:e.id_statut_reclamation},e.priorite&&{priorite:e.priorite});return this.http.post(`${this.API_URL}/reclamations`,t).pipe(o(n=>{console.log("R\xE9clamation cr\xE9\xE9e:",n)}))}}getTypeLabel(e){switch(e){case"anomalie_paiement":return"Anomalie de paiement";case"information_erronee":return"Information erron\xE9e";case"document_manquant":return"Document manquant";case"avancement_projet":return"Avancement projet";case"autre":return"Autre";default:return e}}getPriorityLabel(e){switch(e.toLowerCase()){case"basse":return"Basse";case"normale":return"Normale";case"haute":return"Haute";case"urgente":return"Urgente";default:return e}}getAllReclamations(e){let t=new i;return e&&(e.page&&(t=t.set("page",e.page.toString())),e.per_page&&(t=t.set("per_page",e.per_page.toString())),e.type&&(t=t.set("type",e.type)),e.statut&&(t=t.set("statut",e.statut.toString())),e.priorite&&(t=t.set("priorite",e.priorite)),e.date_debut&&(t=t.set("date_debut",e.date_debut)),e.date_fin&&(t=t.set("date_fin",e.date_fin)),e.search&&(t=t.set("search",e.search))),this.http.get(`${this.API_URL}/reclamations`,{params:t}).pipe(o(n=>{console.log("Toutes les r\xE9clamations r\xE9cup\xE9r\xE9es (admin):",n)}))}respondToReclamation(e,t){return console.log("R\xE9ponse admin pour r\xE9clamation",e,":",t),this.http.put(`${this.API_URL}/reclamations/${e}`,t).pipe(o(n=>{console.log("R\xE9ponse admin envoy\xE9e:",n)}))}getPriorityColor(e){switch(e.toLowerCase()){case"basse":return"green";case"normale":return"blue";case"haute":return"orange";case"urgente":return"red";default:return"default"}}getTypeColor(e){switch(e){case"anomalie_paiement":return"red";case"information_erronee":return"orange";case"document_manquant":return"yellow";case"avancement_projet":return"blue";case"autre":return"default";default:return"default"}}formatDate(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non d\xE9finie"}static \u0275fac=function(t){return new(t||r)(p(c))};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{m as a};
